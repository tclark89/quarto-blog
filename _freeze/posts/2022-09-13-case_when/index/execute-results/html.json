{
  "hash": "27720938a9030dfebf8bb40db0c4f0cf",
  "result": {
    "markdown": "---\ntitle: \"Dplyr's case_when\"\ndate: \"2022-09-13\"\nimage: \"dplyr-logo.png\"\ncategories: [tidyverse, dplyr, notes, code, R]\n---\n\n\nThis is a very small post that's really more of a note-to-self. I wind up using \n  nested `if_else` statements a lot, but `dplyr` contains a nifty function that\n  really eliminates the need for them and in turn cleans up the code. The \n  `case_when` function operates very similarly to `CASE WHEN THEN ELSE` in SQL:\n\n**SQL**\n```sql\nSELECT \n  CASE \n    WHEN x = 1 THEN 'a'\n    WHEN x = 2 THEN 'b'\n    WHEN x = 3 THEN 'c'\n    ELSE 'd'\n  END  \n```\n\n**dplyr**\n```r\ncase_when(\n  x == 1 ~ \"a\",\n  x == 2 ~ \"b\",\n  x == 3 ~ \"c\",\n  TRUE ~ \"d\"\n)\n```\n\nLike in SQL, `dplyr::case_when()` works its way down the list of conditionals\n  in the order that they appear. It's good practice to include the `TRUE ~ result`\n  statement at the end. Sometimes you may want an \"other\" result, other times\n  you may just want to make sure that you've caught all the rows. \n\nFor a more detailed example:\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Let's load some libraries:\nlibrary(tibble)\nlibrary(dplyr)\n```\n:::\n\n::: {.cell lable='mtcars-rownames'}\n\n```{.r .cell-code}\n# I'll use mtcars, and we'll look at the car model\nmtcarsMod <- mtcars |> \n  rownames_to_column(var=\"model\")\nhead(mtcarsMod)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n              model  mpg cyl disp  hp drat    wt  qsec vs am gear carb\n1         Mazda RX4 21.0   6  160 110 3.90 2.620 16.46  0  1    4    4\n2     Mazda RX4 Wag 21.0   6  160 110 3.90 2.875 17.02  0  1    4    4\n3        Datsun 710 22.8   4  108  93 3.85 2.320 18.61  1  1    4    1\n4    Hornet 4 Drive 21.4   6  258 110 3.08 3.215 19.44  1  0    3    1\n5 Hornet Sportabout 18.7   8  360 175 3.15 3.440 17.02  0  0    3    2\n6           Valiant 18.1   6  225 105 2.76 3.460 20.22  1  0    3    1\n```\n:::\n:::\n\n\nLet's say that we want to add the manufacturer as a separate column. There are a \n  few ways to do it:\n  \n  \n### Nested if_else\n\nThe first way that always enters my head is to do nested if_else statements. It's\n  not terrible when there are only a few options, but they get ugly fast:\n  \n\n::: {.cell}\n\n```{.r .cell-code}\nmtcarsMod |> \n  mutate(make = if_else(grepl(\"Mazda\", model), \"Mazda\", \n                        if_else(grepl(\"Hornet\", model), \"Hornet\",\n                                if_else(grepl(\"Merc\", model), \"Mercury\",\n                                        if_else(grepl(\"Datsun\", model), \"Datsun\", \n                                                # etc.\n                                                \"Other\"))))) |> \n  select(make, names(mtcarsMod)) |>\n  rmarkdown::paged_table()\n```\n\n::: {.cell-output-display}\n`````{=html}\n<div data-pagedtable=\"false\">\n  <script data-pagedtable-source type=\"application/json\">\n{\"columns\":[{\"label\":[\"make\"],\"name\":[1],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"model\"],\"name\":[2],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"mpg\"],\"name\":[3],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"cyl\"],\"name\":[4],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"disp\"],\"name\":[5],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"hp\"],\"name\":[6],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"drat\"],\"name\":[7],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"wt\"],\"name\":[8],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"qsec\"],\"name\":[9],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"vs\"],\"name\":[10],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"am\"],\"name\":[11],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"gear\"],\"name\":[12],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"carb\"],\"name\":[13],\"type\":[\"dbl\"],\"align\":[\"right\"]}],\"data\":[{\"1\":\"Mazda\",\"2\":\"Mazda RX4\",\"3\":\"21.0\",\"4\":\"6\",\"5\":\"160.0\",\"6\":\"110\",\"7\":\"3.90\",\"8\":\"2.620\",\"9\":\"16.46\",\"10\":\"0\",\"11\":\"1\",\"12\":\"4\",\"13\":\"4\"},{\"1\":\"Mazda\",\"2\":\"Mazda RX4 Wag\",\"3\":\"21.0\",\"4\":\"6\",\"5\":\"160.0\",\"6\":\"110\",\"7\":\"3.90\",\"8\":\"2.875\",\"9\":\"17.02\",\"10\":\"0\",\"11\":\"1\",\"12\":\"4\",\"13\":\"4\"},{\"1\":\"Datsun\",\"2\":\"Datsun 710\",\"3\":\"22.8\",\"4\":\"4\",\"5\":\"108.0\",\"6\":\"93\",\"7\":\"3.85\",\"8\":\"2.320\",\"9\":\"18.61\",\"10\":\"1\",\"11\":\"1\",\"12\":\"4\",\"13\":\"1\"},{\"1\":\"Hornet\",\"2\":\"Hornet 4 Drive\",\"3\":\"21.4\",\"4\":\"6\",\"5\":\"258.0\",\"6\":\"110\",\"7\":\"3.08\",\"8\":\"3.215\",\"9\":\"19.44\",\"10\":\"1\",\"11\":\"0\",\"12\":\"3\",\"13\":\"1\"},{\"1\":\"Hornet\",\"2\":\"Hornet Sportabout\",\"3\":\"18.7\",\"4\":\"8\",\"5\":\"360.0\",\"6\":\"175\",\"7\":\"3.15\",\"8\":\"3.440\",\"9\":\"17.02\",\"10\":\"0\",\"11\":\"0\",\"12\":\"3\",\"13\":\"2\"},{\"1\":\"Other\",\"2\":\"Valiant\",\"3\":\"18.1\",\"4\":\"6\",\"5\":\"225.0\",\"6\":\"105\",\"7\":\"2.76\",\"8\":\"3.460\",\"9\":\"20.22\",\"10\":\"1\",\"11\":\"0\",\"12\":\"3\",\"13\":\"1\"},{\"1\":\"Other\",\"2\":\"Duster 360\",\"3\":\"14.3\",\"4\":\"8\",\"5\":\"360.0\",\"6\":\"245\",\"7\":\"3.21\",\"8\":\"3.570\",\"9\":\"15.84\",\"10\":\"0\",\"11\":\"0\",\"12\":\"3\",\"13\":\"4\"},{\"1\":\"Mercury\",\"2\":\"Merc 240D\",\"3\":\"24.4\",\"4\":\"4\",\"5\":\"146.7\",\"6\":\"62\",\"7\":\"3.69\",\"8\":\"3.190\",\"9\":\"20.00\",\"10\":\"1\",\"11\":\"0\",\"12\":\"4\",\"13\":\"2\"},{\"1\":\"Mercury\",\"2\":\"Merc 230\",\"3\":\"22.8\",\"4\":\"4\",\"5\":\"140.8\",\"6\":\"95\",\"7\":\"3.92\",\"8\":\"3.150\",\"9\":\"22.90\",\"10\":\"1\",\"11\":\"0\",\"12\":\"4\",\"13\":\"2\"},{\"1\":\"Mercury\",\"2\":\"Merc 280\",\"3\":\"19.2\",\"4\":\"6\",\"5\":\"167.6\",\"6\":\"123\",\"7\":\"3.92\",\"8\":\"3.440\",\"9\":\"18.30\",\"10\":\"1\",\"11\":\"0\",\"12\":\"4\",\"13\":\"4\"},{\"1\":\"Mercury\",\"2\":\"Merc 280C\",\"3\":\"17.8\",\"4\":\"6\",\"5\":\"167.6\",\"6\":\"123\",\"7\":\"3.92\",\"8\":\"3.440\",\"9\":\"18.90\",\"10\":\"1\",\"11\":\"0\",\"12\":\"4\",\"13\":\"4\"},{\"1\":\"Mercury\",\"2\":\"Merc 450SE\",\"3\":\"16.4\",\"4\":\"8\",\"5\":\"275.8\",\"6\":\"180\",\"7\":\"3.07\",\"8\":\"4.070\",\"9\":\"17.40\",\"10\":\"0\",\"11\":\"0\",\"12\":\"3\",\"13\":\"3\"},{\"1\":\"Mercury\",\"2\":\"Merc 450SL\",\"3\":\"17.3\",\"4\":\"8\",\"5\":\"275.8\",\"6\":\"180\",\"7\":\"3.07\",\"8\":\"3.730\",\"9\":\"17.60\",\"10\":\"0\",\"11\":\"0\",\"12\":\"3\",\"13\":\"3\"},{\"1\":\"Mercury\",\"2\":\"Merc 450SLC\",\"3\":\"15.2\",\"4\":\"8\",\"5\":\"275.8\",\"6\":\"180\",\"7\":\"3.07\",\"8\":\"3.780\",\"9\":\"18.00\",\"10\":\"0\",\"11\":\"0\",\"12\":\"3\",\"13\":\"3\"},{\"1\":\"Other\",\"2\":\"Cadillac Fleetwood\",\"3\":\"10.4\",\"4\":\"8\",\"5\":\"472.0\",\"6\":\"205\",\"7\":\"2.93\",\"8\":\"5.250\",\"9\":\"17.98\",\"10\":\"0\",\"11\":\"0\",\"12\":\"3\",\"13\":\"4\"},{\"1\":\"Other\",\"2\":\"Lincoln Continental\",\"3\":\"10.4\",\"4\":\"8\",\"5\":\"460.0\",\"6\":\"215\",\"7\":\"3.00\",\"8\":\"5.424\",\"9\":\"17.82\",\"10\":\"0\",\"11\":\"0\",\"12\":\"3\",\"13\":\"4\"},{\"1\":\"Other\",\"2\":\"Chrysler Imperial\",\"3\":\"14.7\",\"4\":\"8\",\"5\":\"440.0\",\"6\":\"230\",\"7\":\"3.23\",\"8\":\"5.345\",\"9\":\"17.42\",\"10\":\"0\",\"11\":\"0\",\"12\":\"3\",\"13\":\"4\"},{\"1\":\"Other\",\"2\":\"Fiat 128\",\"3\":\"32.4\",\"4\":\"4\",\"5\":\"78.7\",\"6\":\"66\",\"7\":\"4.08\",\"8\":\"2.200\",\"9\":\"19.47\",\"10\":\"1\",\"11\":\"1\",\"12\":\"4\",\"13\":\"1\"},{\"1\":\"Other\",\"2\":\"Honda Civic\",\"3\":\"30.4\",\"4\":\"4\",\"5\":\"75.7\",\"6\":\"52\",\"7\":\"4.93\",\"8\":\"1.615\",\"9\":\"18.52\",\"10\":\"1\",\"11\":\"1\",\"12\":\"4\",\"13\":\"2\"},{\"1\":\"Other\",\"2\":\"Toyota Corolla\",\"3\":\"33.9\",\"4\":\"4\",\"5\":\"71.1\",\"6\":\"65\",\"7\":\"4.22\",\"8\":\"1.835\",\"9\":\"19.90\",\"10\":\"1\",\"11\":\"1\",\"12\":\"4\",\"13\":\"1\"},{\"1\":\"Other\",\"2\":\"Toyota Corona\",\"3\":\"21.5\",\"4\":\"4\",\"5\":\"120.1\",\"6\":\"97\",\"7\":\"3.70\",\"8\":\"2.465\",\"9\":\"20.01\",\"10\":\"1\",\"11\":\"0\",\"12\":\"3\",\"13\":\"1\"},{\"1\":\"Other\",\"2\":\"Dodge Challenger\",\"3\":\"15.5\",\"4\":\"8\",\"5\":\"318.0\",\"6\":\"150\",\"7\":\"2.76\",\"8\":\"3.520\",\"9\":\"16.87\",\"10\":\"0\",\"11\":\"0\",\"12\":\"3\",\"13\":\"2\"},{\"1\":\"Other\",\"2\":\"AMC Javelin\",\"3\":\"15.2\",\"4\":\"8\",\"5\":\"304.0\",\"6\":\"150\",\"7\":\"3.15\",\"8\":\"3.435\",\"9\":\"17.30\",\"10\":\"0\",\"11\":\"0\",\"12\":\"3\",\"13\":\"2\"},{\"1\":\"Other\",\"2\":\"Camaro Z28\",\"3\":\"13.3\",\"4\":\"8\",\"5\":\"350.0\",\"6\":\"245\",\"7\":\"3.73\",\"8\":\"3.840\",\"9\":\"15.41\",\"10\":\"0\",\"11\":\"0\",\"12\":\"3\",\"13\":\"4\"},{\"1\":\"Other\",\"2\":\"Pontiac Firebird\",\"3\":\"19.2\",\"4\":\"8\",\"5\":\"400.0\",\"6\":\"175\",\"7\":\"3.08\",\"8\":\"3.845\",\"9\":\"17.05\",\"10\":\"0\",\"11\":\"0\",\"12\":\"3\",\"13\":\"2\"},{\"1\":\"Other\",\"2\":\"Fiat X1-9\",\"3\":\"27.3\",\"4\":\"4\",\"5\":\"79.0\",\"6\":\"66\",\"7\":\"4.08\",\"8\":\"1.935\",\"9\":\"18.90\",\"10\":\"1\",\"11\":\"1\",\"12\":\"4\",\"13\":\"1\"},{\"1\":\"Other\",\"2\":\"Porsche 914-2\",\"3\":\"26.0\",\"4\":\"4\",\"5\":\"120.3\",\"6\":\"91\",\"7\":\"4.43\",\"8\":\"2.140\",\"9\":\"16.70\",\"10\":\"0\",\"11\":\"1\",\"12\":\"5\",\"13\":\"2\"},{\"1\":\"Other\",\"2\":\"Lotus Europa\",\"3\":\"30.4\",\"4\":\"4\",\"5\":\"95.1\",\"6\":\"113\",\"7\":\"3.77\",\"8\":\"1.513\",\"9\":\"16.90\",\"10\":\"1\",\"11\":\"1\",\"12\":\"5\",\"13\":\"2\"},{\"1\":\"Other\",\"2\":\"Ford Pantera L\",\"3\":\"15.8\",\"4\":\"8\",\"5\":\"351.0\",\"6\":\"264\",\"7\":\"4.22\",\"8\":\"3.170\",\"9\":\"14.50\",\"10\":\"0\",\"11\":\"1\",\"12\":\"5\",\"13\":\"4\"},{\"1\":\"Other\",\"2\":\"Ferrari Dino\",\"3\":\"19.7\",\"4\":\"6\",\"5\":\"145.0\",\"6\":\"175\",\"7\":\"3.62\",\"8\":\"2.770\",\"9\":\"15.50\",\"10\":\"0\",\"11\":\"1\",\"12\":\"5\",\"13\":\"6\"},{\"1\":\"Other\",\"2\":\"Maserati Bora\",\"3\":\"15.0\",\"4\":\"8\",\"5\":\"301.0\",\"6\":\"335\",\"7\":\"3.54\",\"8\":\"3.570\",\"9\":\"14.60\",\"10\":\"0\",\"11\":\"1\",\"12\":\"5\",\"13\":\"8\"},{\"1\":\"Other\",\"2\":\"Volvo 142E\",\"3\":\"21.4\",\"4\":\"4\",\"5\":\"121.0\",\"6\":\"109\",\"7\":\"4.11\",\"8\":\"2.780\",\"9\":\"18.60\",\"10\":\"1\",\"11\":\"1\",\"12\":\"4\",\"13\":\"2\"}],\"options\":{\"columns\":{\"min\":{},\"max\":[10]},\"rows\":{\"min\":[10],\"max\":[10]},\"pages\":{}}}\n  </script>\n</div>\n`````\n:::\n:::\n\n  \n\n### Multiple mutates\n\nOne way to make things cleaner is to do multiple mutates. \n  Create the new column with your \"catch-all\" value, then use conditional statements\n  that leave the new column unchanged when the condition is FALSE:\n  \n\n::: {.cell}\n\n```{.r .cell-code}\nmtcarsMod |> \n  mutate(\n    make = \"Other\",\n    make = if_else(grepl(\"Mazda\", model), \"Mazda\", make),\n    make = if_else(grepl(\"Hornet\", model), \"Hornet\", make),\n    make = if_else(grepl(\"Merc\", model), \"Mercury\", make),\n    make = if_else(grepl(\"Datsun\", model), \"Datsun\", make)\n    # etc.\n  ) |> \n  select(make, names(mtcarsMod)) |>\n  rmarkdown::paged_table()\n```\n\n::: {.cell-output-display}\n`````{=html}\n<div data-pagedtable=\"false\">\n  <script data-pagedtable-source type=\"application/json\">\n{\"columns\":[{\"label\":[\"make\"],\"name\":[1],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"model\"],\"name\":[2],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"mpg\"],\"name\":[3],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"cyl\"],\"name\":[4],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"disp\"],\"name\":[5],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"hp\"],\"name\":[6],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"drat\"],\"name\":[7],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"wt\"],\"name\":[8],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"qsec\"],\"name\":[9],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"vs\"],\"name\":[10],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"am\"],\"name\":[11],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"gear\"],\"name\":[12],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"carb\"],\"name\":[13],\"type\":[\"dbl\"],\"align\":[\"right\"]}],\"data\":[{\"1\":\"Mazda\",\"2\":\"Mazda RX4\",\"3\":\"21.0\",\"4\":\"6\",\"5\":\"160.0\",\"6\":\"110\",\"7\":\"3.90\",\"8\":\"2.620\",\"9\":\"16.46\",\"10\":\"0\",\"11\":\"1\",\"12\":\"4\",\"13\":\"4\"},{\"1\":\"Mazda\",\"2\":\"Mazda RX4 Wag\",\"3\":\"21.0\",\"4\":\"6\",\"5\":\"160.0\",\"6\":\"110\",\"7\":\"3.90\",\"8\":\"2.875\",\"9\":\"17.02\",\"10\":\"0\",\"11\":\"1\",\"12\":\"4\",\"13\":\"4\"},{\"1\":\"Datsun\",\"2\":\"Datsun 710\",\"3\":\"22.8\",\"4\":\"4\",\"5\":\"108.0\",\"6\":\"93\",\"7\":\"3.85\",\"8\":\"2.320\",\"9\":\"18.61\",\"10\":\"1\",\"11\":\"1\",\"12\":\"4\",\"13\":\"1\"},{\"1\":\"Hornet\",\"2\":\"Hornet 4 Drive\",\"3\":\"21.4\",\"4\":\"6\",\"5\":\"258.0\",\"6\":\"110\",\"7\":\"3.08\",\"8\":\"3.215\",\"9\":\"19.44\",\"10\":\"1\",\"11\":\"0\",\"12\":\"3\",\"13\":\"1\"},{\"1\":\"Hornet\",\"2\":\"Hornet Sportabout\",\"3\":\"18.7\",\"4\":\"8\",\"5\":\"360.0\",\"6\":\"175\",\"7\":\"3.15\",\"8\":\"3.440\",\"9\":\"17.02\",\"10\":\"0\",\"11\":\"0\",\"12\":\"3\",\"13\":\"2\"},{\"1\":\"Other\",\"2\":\"Valiant\",\"3\":\"18.1\",\"4\":\"6\",\"5\":\"225.0\",\"6\":\"105\",\"7\":\"2.76\",\"8\":\"3.460\",\"9\":\"20.22\",\"10\":\"1\",\"11\":\"0\",\"12\":\"3\",\"13\":\"1\"},{\"1\":\"Other\",\"2\":\"Duster 360\",\"3\":\"14.3\",\"4\":\"8\",\"5\":\"360.0\",\"6\":\"245\",\"7\":\"3.21\",\"8\":\"3.570\",\"9\":\"15.84\",\"10\":\"0\",\"11\":\"0\",\"12\":\"3\",\"13\":\"4\"},{\"1\":\"Mercury\",\"2\":\"Merc 240D\",\"3\":\"24.4\",\"4\":\"4\",\"5\":\"146.7\",\"6\":\"62\",\"7\":\"3.69\",\"8\":\"3.190\",\"9\":\"20.00\",\"10\":\"1\",\"11\":\"0\",\"12\":\"4\",\"13\":\"2\"},{\"1\":\"Mercury\",\"2\":\"Merc 230\",\"3\":\"22.8\",\"4\":\"4\",\"5\":\"140.8\",\"6\":\"95\",\"7\":\"3.92\",\"8\":\"3.150\",\"9\":\"22.90\",\"10\":\"1\",\"11\":\"0\",\"12\":\"4\",\"13\":\"2\"},{\"1\":\"Mercury\",\"2\":\"Merc 280\",\"3\":\"19.2\",\"4\":\"6\",\"5\":\"167.6\",\"6\":\"123\",\"7\":\"3.92\",\"8\":\"3.440\",\"9\":\"18.30\",\"10\":\"1\",\"11\":\"0\",\"12\":\"4\",\"13\":\"4\"},{\"1\":\"Mercury\",\"2\":\"Merc 280C\",\"3\":\"17.8\",\"4\":\"6\",\"5\":\"167.6\",\"6\":\"123\",\"7\":\"3.92\",\"8\":\"3.440\",\"9\":\"18.90\",\"10\":\"1\",\"11\":\"0\",\"12\":\"4\",\"13\":\"4\"},{\"1\":\"Mercury\",\"2\":\"Merc 450SE\",\"3\":\"16.4\",\"4\":\"8\",\"5\":\"275.8\",\"6\":\"180\",\"7\":\"3.07\",\"8\":\"4.070\",\"9\":\"17.40\",\"10\":\"0\",\"11\":\"0\",\"12\":\"3\",\"13\":\"3\"},{\"1\":\"Mercury\",\"2\":\"Merc 450SL\",\"3\":\"17.3\",\"4\":\"8\",\"5\":\"275.8\",\"6\":\"180\",\"7\":\"3.07\",\"8\":\"3.730\",\"9\":\"17.60\",\"10\":\"0\",\"11\":\"0\",\"12\":\"3\",\"13\":\"3\"},{\"1\":\"Mercury\",\"2\":\"Merc 450SLC\",\"3\":\"15.2\",\"4\":\"8\",\"5\":\"275.8\",\"6\":\"180\",\"7\":\"3.07\",\"8\":\"3.780\",\"9\":\"18.00\",\"10\":\"0\",\"11\":\"0\",\"12\":\"3\",\"13\":\"3\"},{\"1\":\"Other\",\"2\":\"Cadillac Fleetwood\",\"3\":\"10.4\",\"4\":\"8\",\"5\":\"472.0\",\"6\":\"205\",\"7\":\"2.93\",\"8\":\"5.250\",\"9\":\"17.98\",\"10\":\"0\",\"11\":\"0\",\"12\":\"3\",\"13\":\"4\"},{\"1\":\"Other\",\"2\":\"Lincoln Continental\",\"3\":\"10.4\",\"4\":\"8\",\"5\":\"460.0\",\"6\":\"215\",\"7\":\"3.00\",\"8\":\"5.424\",\"9\":\"17.82\",\"10\":\"0\",\"11\":\"0\",\"12\":\"3\",\"13\":\"4\"},{\"1\":\"Other\",\"2\":\"Chrysler Imperial\",\"3\":\"14.7\",\"4\":\"8\",\"5\":\"440.0\",\"6\":\"230\",\"7\":\"3.23\",\"8\":\"5.345\",\"9\":\"17.42\",\"10\":\"0\",\"11\":\"0\",\"12\":\"3\",\"13\":\"4\"},{\"1\":\"Other\",\"2\":\"Fiat 128\",\"3\":\"32.4\",\"4\":\"4\",\"5\":\"78.7\",\"6\":\"66\",\"7\":\"4.08\",\"8\":\"2.200\",\"9\":\"19.47\",\"10\":\"1\",\"11\":\"1\",\"12\":\"4\",\"13\":\"1\"},{\"1\":\"Other\",\"2\":\"Honda Civic\",\"3\":\"30.4\",\"4\":\"4\",\"5\":\"75.7\",\"6\":\"52\",\"7\":\"4.93\",\"8\":\"1.615\",\"9\":\"18.52\",\"10\":\"1\",\"11\":\"1\",\"12\":\"4\",\"13\":\"2\"},{\"1\":\"Other\",\"2\":\"Toyota Corolla\",\"3\":\"33.9\",\"4\":\"4\",\"5\":\"71.1\",\"6\":\"65\",\"7\":\"4.22\",\"8\":\"1.835\",\"9\":\"19.90\",\"10\":\"1\",\"11\":\"1\",\"12\":\"4\",\"13\":\"1\"},{\"1\":\"Other\",\"2\":\"Toyota Corona\",\"3\":\"21.5\",\"4\":\"4\",\"5\":\"120.1\",\"6\":\"97\",\"7\":\"3.70\",\"8\":\"2.465\",\"9\":\"20.01\",\"10\":\"1\",\"11\":\"0\",\"12\":\"3\",\"13\":\"1\"},{\"1\":\"Other\",\"2\":\"Dodge Challenger\",\"3\":\"15.5\",\"4\":\"8\",\"5\":\"318.0\",\"6\":\"150\",\"7\":\"2.76\",\"8\":\"3.520\",\"9\":\"16.87\",\"10\":\"0\",\"11\":\"0\",\"12\":\"3\",\"13\":\"2\"},{\"1\":\"Other\",\"2\":\"AMC Javelin\",\"3\":\"15.2\",\"4\":\"8\",\"5\":\"304.0\",\"6\":\"150\",\"7\":\"3.15\",\"8\":\"3.435\",\"9\":\"17.30\",\"10\":\"0\",\"11\":\"0\",\"12\":\"3\",\"13\":\"2\"},{\"1\":\"Other\",\"2\":\"Camaro Z28\",\"3\":\"13.3\",\"4\":\"8\",\"5\":\"350.0\",\"6\":\"245\",\"7\":\"3.73\",\"8\":\"3.840\",\"9\":\"15.41\",\"10\":\"0\",\"11\":\"0\",\"12\":\"3\",\"13\":\"4\"},{\"1\":\"Other\",\"2\":\"Pontiac Firebird\",\"3\":\"19.2\",\"4\":\"8\",\"5\":\"400.0\",\"6\":\"175\",\"7\":\"3.08\",\"8\":\"3.845\",\"9\":\"17.05\",\"10\":\"0\",\"11\":\"0\",\"12\":\"3\",\"13\":\"2\"},{\"1\":\"Other\",\"2\":\"Fiat X1-9\",\"3\":\"27.3\",\"4\":\"4\",\"5\":\"79.0\",\"6\":\"66\",\"7\":\"4.08\",\"8\":\"1.935\",\"9\":\"18.90\",\"10\":\"1\",\"11\":\"1\",\"12\":\"4\",\"13\":\"1\"},{\"1\":\"Other\",\"2\":\"Porsche 914-2\",\"3\":\"26.0\",\"4\":\"4\",\"5\":\"120.3\",\"6\":\"91\",\"7\":\"4.43\",\"8\":\"2.140\",\"9\":\"16.70\",\"10\":\"0\",\"11\":\"1\",\"12\":\"5\",\"13\":\"2\"},{\"1\":\"Other\",\"2\":\"Lotus Europa\",\"3\":\"30.4\",\"4\":\"4\",\"5\":\"95.1\",\"6\":\"113\",\"7\":\"3.77\",\"8\":\"1.513\",\"9\":\"16.90\",\"10\":\"1\",\"11\":\"1\",\"12\":\"5\",\"13\":\"2\"},{\"1\":\"Other\",\"2\":\"Ford Pantera L\",\"3\":\"15.8\",\"4\":\"8\",\"5\":\"351.0\",\"6\":\"264\",\"7\":\"4.22\",\"8\":\"3.170\",\"9\":\"14.50\",\"10\":\"0\",\"11\":\"1\",\"12\":\"5\",\"13\":\"4\"},{\"1\":\"Other\",\"2\":\"Ferrari Dino\",\"3\":\"19.7\",\"4\":\"6\",\"5\":\"145.0\",\"6\":\"175\",\"7\":\"3.62\",\"8\":\"2.770\",\"9\":\"15.50\",\"10\":\"0\",\"11\":\"1\",\"12\":\"5\",\"13\":\"6\"},{\"1\":\"Other\",\"2\":\"Maserati Bora\",\"3\":\"15.0\",\"4\":\"8\",\"5\":\"301.0\",\"6\":\"335\",\"7\":\"3.54\",\"8\":\"3.570\",\"9\":\"14.60\",\"10\":\"0\",\"11\":\"1\",\"12\":\"5\",\"13\":\"8\"},{\"1\":\"Other\",\"2\":\"Volvo 142E\",\"3\":\"21.4\",\"4\":\"4\",\"5\":\"121.0\",\"6\":\"109\",\"7\":\"4.11\",\"8\":\"2.780\",\"9\":\"18.60\",\"10\":\"1\",\"11\":\"1\",\"12\":\"4\",\"13\":\"2\"}],\"options\":{\"columns\":{\"min\":{},\"max\":[10]},\"rows\":{\"min\":[10],\"max\":[10]},\"pages\":{}}}\n  </script>\n</div>\n`````\n:::\n:::\n\n\n### case_when\n\nBut the cleanest way (IMHO) is to use case_when. I don't know why I always forget\n  about it, but maybe the act of making this post will permanently etch it into\n  my brain.\n  \n\n::: {.cell}\n\n```{.r .cell-code}\nmtcarsMod |> \n  mutate(make = case_when(\n    grepl(\"Mazda\", model) ~ \"Mazda\",\n    grepl(\"Hornet\", model) ~ \"Hornet\",\n    grepl(\"Merc\", model) ~ \"Mercury\",\n    grepl(\"Datsun\", model) ~ \"Datsun\",\n    # etc.\n    TRUE ~ \"Other\"\n  )) |> \n   select(make, names(mtcarsMod)) |>\n  rmarkdown::paged_table()\n```\n\n::: {.cell-output-display}\n`````{=html}\n<div data-pagedtable=\"false\">\n  <script data-pagedtable-source type=\"application/json\">\n{\"columns\":[{\"label\":[\"make\"],\"name\":[1],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"model\"],\"name\":[2],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"mpg\"],\"name\":[3],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"cyl\"],\"name\":[4],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"disp\"],\"name\":[5],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"hp\"],\"name\":[6],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"drat\"],\"name\":[7],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"wt\"],\"name\":[8],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"qsec\"],\"name\":[9],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"vs\"],\"name\":[10],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"am\"],\"name\":[11],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"gear\"],\"name\":[12],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"carb\"],\"name\":[13],\"type\":[\"dbl\"],\"align\":[\"right\"]}],\"data\":[{\"1\":\"Mazda\",\"2\":\"Mazda RX4\",\"3\":\"21.0\",\"4\":\"6\",\"5\":\"160.0\",\"6\":\"110\",\"7\":\"3.90\",\"8\":\"2.620\",\"9\":\"16.46\",\"10\":\"0\",\"11\":\"1\",\"12\":\"4\",\"13\":\"4\"},{\"1\":\"Mazda\",\"2\":\"Mazda RX4 Wag\",\"3\":\"21.0\",\"4\":\"6\",\"5\":\"160.0\",\"6\":\"110\",\"7\":\"3.90\",\"8\":\"2.875\",\"9\":\"17.02\",\"10\":\"0\",\"11\":\"1\",\"12\":\"4\",\"13\":\"4\"},{\"1\":\"Datsun\",\"2\":\"Datsun 710\",\"3\":\"22.8\",\"4\":\"4\",\"5\":\"108.0\",\"6\":\"93\",\"7\":\"3.85\",\"8\":\"2.320\",\"9\":\"18.61\",\"10\":\"1\",\"11\":\"1\",\"12\":\"4\",\"13\":\"1\"},{\"1\":\"Hornet\",\"2\":\"Hornet 4 Drive\",\"3\":\"21.4\",\"4\":\"6\",\"5\":\"258.0\",\"6\":\"110\",\"7\":\"3.08\",\"8\":\"3.215\",\"9\":\"19.44\",\"10\":\"1\",\"11\":\"0\",\"12\":\"3\",\"13\":\"1\"},{\"1\":\"Hornet\",\"2\":\"Hornet Sportabout\",\"3\":\"18.7\",\"4\":\"8\",\"5\":\"360.0\",\"6\":\"175\",\"7\":\"3.15\",\"8\":\"3.440\",\"9\":\"17.02\",\"10\":\"0\",\"11\":\"0\",\"12\":\"3\",\"13\":\"2\"},{\"1\":\"Other\",\"2\":\"Valiant\",\"3\":\"18.1\",\"4\":\"6\",\"5\":\"225.0\",\"6\":\"105\",\"7\":\"2.76\",\"8\":\"3.460\",\"9\":\"20.22\",\"10\":\"1\",\"11\":\"0\",\"12\":\"3\",\"13\":\"1\"},{\"1\":\"Other\",\"2\":\"Duster 360\",\"3\":\"14.3\",\"4\":\"8\",\"5\":\"360.0\",\"6\":\"245\",\"7\":\"3.21\",\"8\":\"3.570\",\"9\":\"15.84\",\"10\":\"0\",\"11\":\"0\",\"12\":\"3\",\"13\":\"4\"},{\"1\":\"Mercury\",\"2\":\"Merc 240D\",\"3\":\"24.4\",\"4\":\"4\",\"5\":\"146.7\",\"6\":\"62\",\"7\":\"3.69\",\"8\":\"3.190\",\"9\":\"20.00\",\"10\":\"1\",\"11\":\"0\",\"12\":\"4\",\"13\":\"2\"},{\"1\":\"Mercury\",\"2\":\"Merc 230\",\"3\":\"22.8\",\"4\":\"4\",\"5\":\"140.8\",\"6\":\"95\",\"7\":\"3.92\",\"8\":\"3.150\",\"9\":\"22.90\",\"10\":\"1\",\"11\":\"0\",\"12\":\"4\",\"13\":\"2\"},{\"1\":\"Mercury\",\"2\":\"Merc 280\",\"3\":\"19.2\",\"4\":\"6\",\"5\":\"167.6\",\"6\":\"123\",\"7\":\"3.92\",\"8\":\"3.440\",\"9\":\"18.30\",\"10\":\"1\",\"11\":\"0\",\"12\":\"4\",\"13\":\"4\"},{\"1\":\"Mercury\",\"2\":\"Merc 280C\",\"3\":\"17.8\",\"4\":\"6\",\"5\":\"167.6\",\"6\":\"123\",\"7\":\"3.92\",\"8\":\"3.440\",\"9\":\"18.90\",\"10\":\"1\",\"11\":\"0\",\"12\":\"4\",\"13\":\"4\"},{\"1\":\"Mercury\",\"2\":\"Merc 450SE\",\"3\":\"16.4\",\"4\":\"8\",\"5\":\"275.8\",\"6\":\"180\",\"7\":\"3.07\",\"8\":\"4.070\",\"9\":\"17.40\",\"10\":\"0\",\"11\":\"0\",\"12\":\"3\",\"13\":\"3\"},{\"1\":\"Mercury\",\"2\":\"Merc 450SL\",\"3\":\"17.3\",\"4\":\"8\",\"5\":\"275.8\",\"6\":\"180\",\"7\":\"3.07\",\"8\":\"3.730\",\"9\":\"17.60\",\"10\":\"0\",\"11\":\"0\",\"12\":\"3\",\"13\":\"3\"},{\"1\":\"Mercury\",\"2\":\"Merc 450SLC\",\"3\":\"15.2\",\"4\":\"8\",\"5\":\"275.8\",\"6\":\"180\",\"7\":\"3.07\",\"8\":\"3.780\",\"9\":\"18.00\",\"10\":\"0\",\"11\":\"0\",\"12\":\"3\",\"13\":\"3\"},{\"1\":\"Other\",\"2\":\"Cadillac Fleetwood\",\"3\":\"10.4\",\"4\":\"8\",\"5\":\"472.0\",\"6\":\"205\",\"7\":\"2.93\",\"8\":\"5.250\",\"9\":\"17.98\",\"10\":\"0\",\"11\":\"0\",\"12\":\"3\",\"13\":\"4\"},{\"1\":\"Other\",\"2\":\"Lincoln Continental\",\"3\":\"10.4\",\"4\":\"8\",\"5\":\"460.0\",\"6\":\"215\",\"7\":\"3.00\",\"8\":\"5.424\",\"9\":\"17.82\",\"10\":\"0\",\"11\":\"0\",\"12\":\"3\",\"13\":\"4\"},{\"1\":\"Other\",\"2\":\"Chrysler Imperial\",\"3\":\"14.7\",\"4\":\"8\",\"5\":\"440.0\",\"6\":\"230\",\"7\":\"3.23\",\"8\":\"5.345\",\"9\":\"17.42\",\"10\":\"0\",\"11\":\"0\",\"12\":\"3\",\"13\":\"4\"},{\"1\":\"Other\",\"2\":\"Fiat 128\",\"3\":\"32.4\",\"4\":\"4\",\"5\":\"78.7\",\"6\":\"66\",\"7\":\"4.08\",\"8\":\"2.200\",\"9\":\"19.47\",\"10\":\"1\",\"11\":\"1\",\"12\":\"4\",\"13\":\"1\"},{\"1\":\"Other\",\"2\":\"Honda Civic\",\"3\":\"30.4\",\"4\":\"4\",\"5\":\"75.7\",\"6\":\"52\",\"7\":\"4.93\",\"8\":\"1.615\",\"9\":\"18.52\",\"10\":\"1\",\"11\":\"1\",\"12\":\"4\",\"13\":\"2\"},{\"1\":\"Other\",\"2\":\"Toyota Corolla\",\"3\":\"33.9\",\"4\":\"4\",\"5\":\"71.1\",\"6\":\"65\",\"7\":\"4.22\",\"8\":\"1.835\",\"9\":\"19.90\",\"10\":\"1\",\"11\":\"1\",\"12\":\"4\",\"13\":\"1\"},{\"1\":\"Other\",\"2\":\"Toyota Corona\",\"3\":\"21.5\",\"4\":\"4\",\"5\":\"120.1\",\"6\":\"97\",\"7\":\"3.70\",\"8\":\"2.465\",\"9\":\"20.01\",\"10\":\"1\",\"11\":\"0\",\"12\":\"3\",\"13\":\"1\"},{\"1\":\"Other\",\"2\":\"Dodge Challenger\",\"3\":\"15.5\",\"4\":\"8\",\"5\":\"318.0\",\"6\":\"150\",\"7\":\"2.76\",\"8\":\"3.520\",\"9\":\"16.87\",\"10\":\"0\",\"11\":\"0\",\"12\":\"3\",\"13\":\"2\"},{\"1\":\"Other\",\"2\":\"AMC Javelin\",\"3\":\"15.2\",\"4\":\"8\",\"5\":\"304.0\",\"6\":\"150\",\"7\":\"3.15\",\"8\":\"3.435\",\"9\":\"17.30\",\"10\":\"0\",\"11\":\"0\",\"12\":\"3\",\"13\":\"2\"},{\"1\":\"Other\",\"2\":\"Camaro Z28\",\"3\":\"13.3\",\"4\":\"8\",\"5\":\"350.0\",\"6\":\"245\",\"7\":\"3.73\",\"8\":\"3.840\",\"9\":\"15.41\",\"10\":\"0\",\"11\":\"0\",\"12\":\"3\",\"13\":\"4\"},{\"1\":\"Other\",\"2\":\"Pontiac Firebird\",\"3\":\"19.2\",\"4\":\"8\",\"5\":\"400.0\",\"6\":\"175\",\"7\":\"3.08\",\"8\":\"3.845\",\"9\":\"17.05\",\"10\":\"0\",\"11\":\"0\",\"12\":\"3\",\"13\":\"2\"},{\"1\":\"Other\",\"2\":\"Fiat X1-9\",\"3\":\"27.3\",\"4\":\"4\",\"5\":\"79.0\",\"6\":\"66\",\"7\":\"4.08\",\"8\":\"1.935\",\"9\":\"18.90\",\"10\":\"1\",\"11\":\"1\",\"12\":\"4\",\"13\":\"1\"},{\"1\":\"Other\",\"2\":\"Porsche 914-2\",\"3\":\"26.0\",\"4\":\"4\",\"5\":\"120.3\",\"6\":\"91\",\"7\":\"4.43\",\"8\":\"2.140\",\"9\":\"16.70\",\"10\":\"0\",\"11\":\"1\",\"12\":\"5\",\"13\":\"2\"},{\"1\":\"Other\",\"2\":\"Lotus Europa\",\"3\":\"30.4\",\"4\":\"4\",\"5\":\"95.1\",\"6\":\"113\",\"7\":\"3.77\",\"8\":\"1.513\",\"9\":\"16.90\",\"10\":\"1\",\"11\":\"1\",\"12\":\"5\",\"13\":\"2\"},{\"1\":\"Other\",\"2\":\"Ford Pantera L\",\"3\":\"15.8\",\"4\":\"8\",\"5\":\"351.0\",\"6\":\"264\",\"7\":\"4.22\",\"8\":\"3.170\",\"9\":\"14.50\",\"10\":\"0\",\"11\":\"1\",\"12\":\"5\",\"13\":\"4\"},{\"1\":\"Other\",\"2\":\"Ferrari Dino\",\"3\":\"19.7\",\"4\":\"6\",\"5\":\"145.0\",\"6\":\"175\",\"7\":\"3.62\",\"8\":\"2.770\",\"9\":\"15.50\",\"10\":\"0\",\"11\":\"1\",\"12\":\"5\",\"13\":\"6\"},{\"1\":\"Other\",\"2\":\"Maserati Bora\",\"3\":\"15.0\",\"4\":\"8\",\"5\":\"301.0\",\"6\":\"335\",\"7\":\"3.54\",\"8\":\"3.570\",\"9\":\"14.60\",\"10\":\"0\",\"11\":\"1\",\"12\":\"5\",\"13\":\"8\"},{\"1\":\"Other\",\"2\":\"Volvo 142E\",\"3\":\"21.4\",\"4\":\"4\",\"5\":\"121.0\",\"6\":\"109\",\"7\":\"4.11\",\"8\":\"2.780\",\"9\":\"18.60\",\"10\":\"1\",\"11\":\"1\",\"12\":\"4\",\"13\":\"2\"}],\"options\":{\"columns\":{\"min\":{},\"max\":[10]},\"rows\":{\"min\":[10],\"max\":[10]},\"pages\":{}}}\n  </script>\n</div>\n`````\n:::\n:::\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {
      "include-in-header": [
        "<link href=\"../../site_libs/pagedtable-1.1/css/pagedtable.css\" rel=\"stylesheet\" />\r\n<script src=\"../../site_libs/pagedtable-1.1/js/pagedtable.js\"></script>\r\n"
      ]
    },
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}