{
  "hash": "cf75685b2e3dbb29d4675e41772b389e",
  "result": {
    "markdown": "---\ntitle: \"Using Crosstalk\"\ndate: \"2023-01-23\"\ncategories: [crosstalk, R, ggplot2, plotly, code]\nexecute: \n  warning: false\n---\n\n\nMost everyone who works with data is familiar with or at least aware of \n  [Shiny](https://shiny.rstudio.com/) and all of the great things you can do\n  with it's interactive capabilities. However, Shiny also requires some extra work\n  on the backend that may not be available to everyone. I can write Shiny apps\n  all day, but I can't share them with coworkers since they don't have R/Rstudio,\n  and my employer doesn't have a Shiny server, nor do we have an account with \n  [shinyapps.io](https://www.shinyapps.io/). \n  \nMost of the time when I need to share some data that I have worked on in R I use\n  Rmarkdown/Quarto, with a PDF or Word output for printing purposes and an HTML\n  report that uses Plotly, DT, Knitr, etc. to give some level of responsiveness.\n  However, the `crosstalk` library allows users to bridge the gap between\n  a fully interactive Shiny document and a fixed Rmarkdown/Quarto document.\n\n\n## Libraries\n\nFirst things first, we'll need to load some libraries:\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tidyverse)\nlibrary(crosstalk)\nlibrary(d3scatter)\nlibrary(plotly)\nlibrary(rgl)\nlibrary(DT)\nlibrary(summarywidget)\n```\n:::\n\n\n - tidyverse: Needs no explanation\n - crosstalk: This is the magic sauce\n - d3scatter: Simple plots (think `ggplot() + theme_bw()`) that work with `crosstalk`\n - plotly: Wonderful interactive plots on their own, `plotly` plots can be made \n    more interactive with `crosstalk`\n - DT: DT makes tables that already have filtering and responsiveness built-in,\n    but we can use crosstalk to further filter and update in sync with the plots\n - summarywidget: This lets us generate summary values, like you might do in Shiny\n\n\nOther crosstalk compatible libraries are `leaflet` for mapping and `rgl` for \n  interactive 3d plotting.\n\n\n## The Basics\n\nTo use crosstalk, we have to create a SharedData object:\n\n::: {.cell}\n\n```{.r .cell-code}\nsharedMtCars <- SharedData$new(mtcars)\n```\n:::\n\n\nThen we use these objects like data.frames in crosstalk-compatible widgets.\n\n`crosstalk` also provides some `filter_*` functions:\n\n::: {.cell}\n\n```{.r .cell-code}\ncarsCheckBox <- filter_checkbox(\"cyl\", \"Cylinders\", sharedMtCars, ~cyl, inline=T)\ncarsSelect <- filter_select(\"am\", \"Automatic\", sharedMtCars, ~am)\ncarsSlider <- filter_slider(\"disp\", \"Displacement\", sharedMtCars, ~disp)\n\ncarsPlot <- d3scatter(sharedMtCars, ~wt, ~mpg, ~factor(cyl), width=\"100%\")\n```\n:::\n\n\nChanging the selected values will cause this plot to update, no need for Shiny:\n\n::: {.columns}\n\n:::: {.column width=\"30%\"}\n\n::: {.cell}\n::: {.cell-output-display}\n```{=html}\n<div id=\"cyl\" class=\"form-group crosstalk-input-checkboxgroup crosstalk-input\">\n<label class=\"control-label\" for=\"cyl\">Cylinders</label>\n<div class=\"crosstalk-options-group\">\n<label class=\"checkbox-inline\">\n<input type=\"checkbox\" name=\"cyl\" value=\"4\"/>\n<span>4</span>\n</label>\n<label class=\"checkbox-inline\">\n<input type=\"checkbox\" name=\"cyl\" value=\"6\"/>\n<span>6</span>\n</label>\n<label class=\"checkbox-inline\">\n<input type=\"checkbox\" name=\"cyl\" value=\"8\"/>\n<span>8</span>\n</label>\n</div>\n<script type=\"application/json\" data-for=\"cyl\">{\n  \"map\": {\n    \"4\": [\"Datsun 710\", \"Merc 240D\", \"Merc 230\", \"Fiat 128\", \"Honda Civic\", \"Toyota Corolla\", \"Toyota Corona\", \"Fiat X1-9\", \"Porsche 914-2\", \"Lotus Europa\", \"Volvo 142E\"],\n    \"6\": [\"Mazda RX4\", \"Mazda RX4 Wag\", \"Hornet 4 Drive\", \"Valiant\", \"Merc 280\", \"Merc 280C\", \"Ferrari Dino\"],\n    \"8\": [\"Hornet Sportabout\", \"Duster 360\", \"Merc 450SE\", \"Merc 450SL\", \"Merc 450SLC\", \"Cadillac Fleetwood\", \"Lincoln Continental\", \"Chrysler Imperial\", \"Dodge Challenger\", \"AMC Javelin\", \"Camaro Z28\", \"Pontiac Firebird\", \"Ford Pantera L\", \"Maserati Bora\"]\n  },\n  \"group\": [\"SharedData43629472\"]\n}</script>\n</div>\n```\n:::\n\n::: {.cell-output-display}\n```{=html}\n<div id=\"am\" class=\"form-group crosstalk-input-select crosstalk-input\">\n<label class=\"control-label\" for=\"am\">Automatic</label>\n<div>\n<select multiple></select>\n<script type=\"application/json\" data-for=\"am\">{\n  \"items\": {\n    \"value\": [\"0\", \"1\"],\n    \"label\": [\"0\", \"1\"]\n  },\n  \"map\": {\n    \"0\": [\"Hornet 4 Drive\", \"Hornet Sportabout\", \"Valiant\", \"Duster 360\", \"Merc 240D\", \"Merc 230\", \"Merc 280\", \"Merc 280C\", \"Merc 450SE\", \"Merc 450SL\", \"Merc 450SLC\", \"Cadillac Fleetwood\", \"Lincoln Continental\", \"Chrysler Imperial\", \"Toyota Corona\", \"Dodge Challenger\", \"AMC Javelin\", \"Camaro Z28\", \"Pontiac Firebird\"],\n    \"1\": [\"Mazda RX4\", \"Mazda RX4 Wag\", \"Datsun 710\", \"Fiat 128\", \"Honda Civic\", \"Toyota Corolla\", \"Fiat X1-9\", \"Porsche 914-2\", \"Lotus Europa\", \"Ford Pantera L\", \"Ferrari Dino\", \"Maserati Bora\", \"Volvo 142E\"]\n  },\n  \"group\": [\"SharedData43629472\"]\n}</script>\n</div>\n</div>\n```\n:::\n\n::: {.cell-output-display}\n```{=html}\n<div class=\"form-group crosstalk-input crosstalk-input-slider js-range-slider\" id=\"disp\">\n<label class=\"control-label\" for=\"disp\">Displacement</label>\n<input data-skin=\"shiny\" data-type=\"double\" data-min=\"71.1\" data-max=\"472\" data-from=\"71.1\" data-to=\"472\" data-step=\"5\" data-grid=\"true\" data-grid-num=\"8.90888888888889\" data-grid-snap=\"false\" data-prettify-separator=\",\" data-keyboard=\"true\" data-keyboard-step=\"1.24719381391868\" data-drag-interval=\"true\" data-data-type=\"number\"/>\n<script type=\"application/json\" data-for=\"disp\">{\n  \"values\": [71.1, 75.7, 78.7, 79, 95.1, 108, 120.1, 120.3, 121, 140.8, 145, 146.7, 160, 160, 167.6, 167.6, 225, 258, 275.8, 275.8, 275.8, 301, 304, 318, 350, 351, 360, 360, 400, 440, 460, 472],\n  \"keys\": [\"Toyota Corolla\", \"Honda Civic\", \"Fiat 128\", \"Fiat X1-9\", \"Lotus Europa\", \"Datsun 710\", \"Toyota Corona\", \"Porsche 914-2\", \"Volvo 142E\", \"Merc 230\", \"Ferrari Dino\", \"Merc 240D\", \"Mazda RX4\", \"Mazda RX4 Wag\", \"Merc 280\", \"Merc 280C\", \"Valiant\", \"Hornet 4 Drive\", \"Merc 450SE\", \"Merc 450SL\", \"Merc 450SLC\", \"Maserati Bora\", \"AMC Javelin\", \"Dodge Challenger\", \"Camaro Z28\", \"Ford Pantera L\", \"Hornet Sportabout\", \"Duster 360\", \"Pontiac Firebird\", \"Chrysler Imperial\", \"Lincoln Continental\", \"Cadillac Fleetwood\"],\n  \"group\": [\"SharedData43629472\"]\n}</script>\n</div>\n```\n:::\n:::\n\n::::\n\n:::: {.column width=\"70%\"}\n\n::: {.cell}\n::: {.cell-output-display}\n```{=html}\n<div id=\"htmlwidget-c1fb52a8f16b7234f19f\" style=\"width:100%;height:480px;\" class=\"d3scatter html-widget \"></div>\n<script type=\"application/json\" data-for=\"htmlwidget-c1fb52a8f16b7234f19f\">{\"x\":{\"data\":{\"x\":[2.62,2.875,2.32,3.215,3.44,3.46,3.57,3.19,3.15,3.44,3.44,4.07,3.73,3.78,5.25,5.424,5.345,2.2,1.615,1.835,2.465,3.52,3.435,3.84,3.845,1.935,2.14,1.513,3.17,2.77,3.57,2.78],\"y\":[21,21,22.8,21.4,18.7,18.1,14.3,24.4,22.8,19.2,17.8,16.4,17.3,15.2,10.4,10.4,14.7,32.4,30.4,33.9,21.5,15.5,15.2,13.3,19.2,27.3,26,30.4,15.8,19.7,15,21.4],\"key\":[\"Mazda RX4\",\"Mazda RX4 Wag\",\"Datsun 710\",\"Hornet 4 Drive\",\"Hornet Sportabout\",\"Valiant\",\"Duster 360\",\"Merc 240D\",\"Merc 230\",\"Merc 280\",\"Merc 280C\",\"Merc 450SE\",\"Merc 450SL\",\"Merc 450SLC\",\"Cadillac Fleetwood\",\"Lincoln Continental\",\"Chrysler Imperial\",\"Fiat 128\",\"Honda Civic\",\"Toyota Corolla\",\"Toyota Corona\",\"Dodge Challenger\",\"AMC Javelin\",\"Camaro Z28\",\"Pontiac Firebird\",\"Fiat X1-9\",\"Porsche 914-2\",\"Lotus Europa\",\"Ford Pantera L\",\"Ferrari Dino\",\"Maserati Bora\",\"Volvo 142E\"],\"color\":[\"6\",\"6\",\"4\",\"6\",\"8\",\"6\",\"8\",\"4\",\"4\",\"6\",\"6\",\"8\",\"8\",\"8\",\"8\",\"8\",\"8\",\"4\",\"4\",\"4\",\"4\",\"8\",\"8\",\"8\",\"8\",\"4\",\"4\",\"4\",\"8\",\"6\",\"8\",\"4\"]},\"color_spec\":{\"type\":\"ordinal\",\"values\":[\"4\",\"6\",\"8\"]},\"color\":[\"6\",\"6\",\"4\",\"6\",\"8\",\"6\",\"8\",\"4\",\"4\",\"6\",\"6\",\"8\",\"8\",\"8\",\"8\",\"8\",\"8\",\"4\",\"4\",\"4\",\"4\",\"8\",\"8\",\"8\",\"8\",\"4\",\"4\",\"4\",\"8\",\"6\",\"8\",\"4\"],\"x_label\":\"wt\",\"y_label\":\"mpg\",\"x_lim\":null,\"y_lim\":null,\"group\":\"SharedData43629472\"},\"evals\":[],\"jsHooks\":[]}</script>\n```\n:::\n:::\n\n::::\n\n:::\n\n\n\n\n## Simple Plots\n\n\n### d3scatter\n\nd3scatter is a dead-simple library for graphs that work with crosstalk. As seen\n  above, it's very much like a simple ggplot in appearance. As long as the plot\n  and all of the `filter_*` functions use the same SharedData object, then the\n  plot will update in real time with the various selections.\n  \n\nWhat's really neat about crosstalk is that we can update multiple plots at once:\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# create a new SharedObject so we're not manipulating everything on the page:\nsharedMtCars <- SharedData$new(mtcars)\n\ncarsCheckBox <- filter_checkbox(\"cyl\", \"Cylinders\", sharedMtCars, ~cyl, inline=T)\ncarsSelect <- filter_select(\"am\", \"Automatic\", sharedMtCars, ~am)\ncarsSlider <- filter_slider(\"disp\", \"Displacement\", sharedMtCars, ~disp)\n\ncarsPlotMpg <- d3scatter(sharedMtCars, ~wt, ~mpg, ~factor(cyl), width=\"100%\")\ncarsPlothp <- d3scatter(sharedMtCars, ~wt, ~hp, ~factor(cyl), width=\"100%\")\n```\n:::\n\n\n::: {.columns}\n\n:::: {.column width=\"30%\"}\n\n::: {.cell}\n::: {.cell-output-display}\n```{=html}\n<div id=\"cyl\" class=\"form-group crosstalk-input-checkboxgroup crosstalk-input\">\n<label class=\"control-label\" for=\"cyl\">Cylinders</label>\n<div class=\"crosstalk-options-group\">\n<label class=\"checkbox-inline\">\n<input type=\"checkbox\" name=\"cyl\" value=\"4\"/>\n<span>4</span>\n</label>\n<label class=\"checkbox-inline\">\n<input type=\"checkbox\" name=\"cyl\" value=\"6\"/>\n<span>6</span>\n</label>\n<label class=\"checkbox-inline\">\n<input type=\"checkbox\" name=\"cyl\" value=\"8\"/>\n<span>8</span>\n</label>\n</div>\n<script type=\"application/json\" data-for=\"cyl\">{\n  \"map\": {\n    \"4\": [\"Datsun 710\", \"Merc 240D\", \"Merc 230\", \"Fiat 128\", \"Honda Civic\", \"Toyota Corolla\", \"Toyota Corona\", \"Fiat X1-9\", \"Porsche 914-2\", \"Lotus Europa\", \"Volvo 142E\"],\n    \"6\": [\"Mazda RX4\", \"Mazda RX4 Wag\", \"Hornet 4 Drive\", \"Valiant\", \"Merc 280\", \"Merc 280C\", \"Ferrari Dino\"],\n    \"8\": [\"Hornet Sportabout\", \"Duster 360\", \"Merc 450SE\", \"Merc 450SL\", \"Merc 450SLC\", \"Cadillac Fleetwood\", \"Lincoln Continental\", \"Chrysler Imperial\", \"Dodge Challenger\", \"AMC Javelin\", \"Camaro Z28\", \"Pontiac Firebird\", \"Ford Pantera L\", \"Maserati Bora\"]\n  },\n  \"group\": [\"SharedDatac1fb52a8\"]\n}</script>\n</div>\n```\n:::\n\n::: {.cell-output-display}\n```{=html}\n<div id=\"am\" class=\"form-group crosstalk-input-select crosstalk-input\">\n<label class=\"control-label\" for=\"am\">Automatic</label>\n<div>\n<select multiple></select>\n<script type=\"application/json\" data-for=\"am\">{\n  \"items\": {\n    \"value\": [\"0\", \"1\"],\n    \"label\": [\"0\", \"1\"]\n  },\n  \"map\": {\n    \"0\": [\"Hornet 4 Drive\", \"Hornet Sportabout\", \"Valiant\", \"Duster 360\", \"Merc 240D\", \"Merc 230\", \"Merc 280\", \"Merc 280C\", \"Merc 450SE\", \"Merc 450SL\", \"Merc 450SLC\", \"Cadillac Fleetwood\", \"Lincoln Continental\", \"Chrysler Imperial\", \"Toyota Corona\", \"Dodge Challenger\", \"AMC Javelin\", \"Camaro Z28\", \"Pontiac Firebird\"],\n    \"1\": [\"Mazda RX4\", \"Mazda RX4 Wag\", \"Datsun 710\", \"Fiat 128\", \"Honda Civic\", \"Toyota Corolla\", \"Fiat X1-9\", \"Porsche 914-2\", \"Lotus Europa\", \"Ford Pantera L\", \"Ferrari Dino\", \"Maserati Bora\", \"Volvo 142E\"]\n  },\n  \"group\": [\"SharedDatac1fb52a8\"]\n}</script>\n</div>\n</div>\n```\n:::\n\n::: {.cell-output-display}\n```{=html}\n<div class=\"form-group crosstalk-input crosstalk-input-slider js-range-slider\" id=\"disp\">\n<label class=\"control-label\" for=\"disp\">Displacement</label>\n<input data-skin=\"shiny\" data-type=\"double\" data-min=\"71.1\" data-max=\"472\" data-from=\"71.1\" data-to=\"472\" data-step=\"5\" data-grid=\"true\" data-grid-num=\"8.90888888888889\" data-grid-snap=\"false\" data-prettify-separator=\",\" data-keyboard=\"true\" data-keyboard-step=\"1.24719381391868\" data-drag-interval=\"true\" data-data-type=\"number\"/>\n<script type=\"application/json\" data-for=\"disp\">{\n  \"values\": [71.1, 75.7, 78.7, 79, 95.1, 108, 120.1, 120.3, 121, 140.8, 145, 146.7, 160, 160, 167.6, 167.6, 225, 258, 275.8, 275.8, 275.8, 301, 304, 318, 350, 351, 360, 360, 400, 440, 460, 472],\n  \"keys\": [\"Toyota Corolla\", \"Honda Civic\", \"Fiat 128\", \"Fiat X1-9\", \"Lotus Europa\", \"Datsun 710\", \"Toyota Corona\", \"Porsche 914-2\", \"Volvo 142E\", \"Merc 230\", \"Ferrari Dino\", \"Merc 240D\", \"Mazda RX4\", \"Mazda RX4 Wag\", \"Merc 280\", \"Merc 280C\", \"Valiant\", \"Hornet 4 Drive\", \"Merc 450SE\", \"Merc 450SL\", \"Merc 450SLC\", \"Maserati Bora\", \"AMC Javelin\", \"Dodge Challenger\", \"Camaro Z28\", \"Ford Pantera L\", \"Hornet Sportabout\", \"Duster 360\", \"Pontiac Firebird\", \"Chrysler Imperial\", \"Lincoln Continental\", \"Cadillac Fleetwood\"],\n  \"group\": [\"SharedDatac1fb52a8\"]\n}</script>\n</div>\n```\n:::\n:::\n\n::::\n\n:::: {.column width=\"35%\"}\n\n::: {.cell}\n::: {.cell-output-display}\n```{=html}\n<div id=\"htmlwidget-2ee9439d089afe75cd0f\" style=\"width:100%;height:480px;\" class=\"d3scatter html-widget \"></div>\n<script type=\"application/json\" data-for=\"htmlwidget-2ee9439d089afe75cd0f\">{\"x\":{\"data\":{\"x\":[2.62,2.875,2.32,3.215,3.44,3.46,3.57,3.19,3.15,3.44,3.44,4.07,3.73,3.78,5.25,5.424,5.345,2.2,1.615,1.835,2.465,3.52,3.435,3.84,3.845,1.935,2.14,1.513,3.17,2.77,3.57,2.78],\"y\":[21,21,22.8,21.4,18.7,18.1,14.3,24.4,22.8,19.2,17.8,16.4,17.3,15.2,10.4,10.4,14.7,32.4,30.4,33.9,21.5,15.5,15.2,13.3,19.2,27.3,26,30.4,15.8,19.7,15,21.4],\"key\":[\"Mazda RX4\",\"Mazda RX4 Wag\",\"Datsun 710\",\"Hornet 4 Drive\",\"Hornet Sportabout\",\"Valiant\",\"Duster 360\",\"Merc 240D\",\"Merc 230\",\"Merc 280\",\"Merc 280C\",\"Merc 450SE\",\"Merc 450SL\",\"Merc 450SLC\",\"Cadillac Fleetwood\",\"Lincoln Continental\",\"Chrysler Imperial\",\"Fiat 128\",\"Honda Civic\",\"Toyota Corolla\",\"Toyota Corona\",\"Dodge Challenger\",\"AMC Javelin\",\"Camaro Z28\",\"Pontiac Firebird\",\"Fiat X1-9\",\"Porsche 914-2\",\"Lotus Europa\",\"Ford Pantera L\",\"Ferrari Dino\",\"Maserati Bora\",\"Volvo 142E\"],\"color\":[\"6\",\"6\",\"4\",\"6\",\"8\",\"6\",\"8\",\"4\",\"4\",\"6\",\"6\",\"8\",\"8\",\"8\",\"8\",\"8\",\"8\",\"4\",\"4\",\"4\",\"4\",\"8\",\"8\",\"8\",\"8\",\"4\",\"4\",\"4\",\"8\",\"6\",\"8\",\"4\"]},\"color_spec\":{\"type\":\"ordinal\",\"values\":[\"4\",\"6\",\"8\"]},\"color\":[\"6\",\"6\",\"4\",\"6\",\"8\",\"6\",\"8\",\"4\",\"4\",\"6\",\"6\",\"8\",\"8\",\"8\",\"8\",\"8\",\"8\",\"4\",\"4\",\"4\",\"4\",\"8\",\"8\",\"8\",\"8\",\"4\",\"4\",\"4\",\"8\",\"6\",\"8\",\"4\"],\"x_label\":\"wt\",\"y_label\":\"mpg\",\"x_lim\":null,\"y_lim\":null,\"group\":\"SharedDatac1fb52a8\"},\"evals\":[],\"jsHooks\":[]}</script>\n```\n:::\n:::\n\n::::\n\n:::: {.column width=\"35%\"}\n\n::: {.cell}\n::: {.cell-output-display}\n```{=html}\n<div id=\"htmlwidget-7c6b179ac800e96ce37a\" style=\"width:100%;height:480px;\" class=\"d3scatter html-widget \"></div>\n<script type=\"application/json\" data-for=\"htmlwidget-7c6b179ac800e96ce37a\">{\"x\":{\"data\":{\"x\":[2.62,2.875,2.32,3.215,3.44,3.46,3.57,3.19,3.15,3.44,3.44,4.07,3.73,3.78,5.25,5.424,5.345,2.2,1.615,1.835,2.465,3.52,3.435,3.84,3.845,1.935,2.14,1.513,3.17,2.77,3.57,2.78],\"y\":[110,110,93,110,175,105,245,62,95,123,123,180,180,180,205,215,230,66,52,65,97,150,150,245,175,66,91,113,264,175,335,109],\"key\":[\"Mazda RX4\",\"Mazda RX4 Wag\",\"Datsun 710\",\"Hornet 4 Drive\",\"Hornet Sportabout\",\"Valiant\",\"Duster 360\",\"Merc 240D\",\"Merc 230\",\"Merc 280\",\"Merc 280C\",\"Merc 450SE\",\"Merc 450SL\",\"Merc 450SLC\",\"Cadillac Fleetwood\",\"Lincoln Continental\",\"Chrysler Imperial\",\"Fiat 128\",\"Honda Civic\",\"Toyota Corolla\",\"Toyota Corona\",\"Dodge Challenger\",\"AMC Javelin\",\"Camaro Z28\",\"Pontiac Firebird\",\"Fiat X1-9\",\"Porsche 914-2\",\"Lotus Europa\",\"Ford Pantera L\",\"Ferrari Dino\",\"Maserati Bora\",\"Volvo 142E\"],\"color\":[\"6\",\"6\",\"4\",\"6\",\"8\",\"6\",\"8\",\"4\",\"4\",\"6\",\"6\",\"8\",\"8\",\"8\",\"8\",\"8\",\"8\",\"4\",\"4\",\"4\",\"4\",\"8\",\"8\",\"8\",\"8\",\"4\",\"4\",\"4\",\"8\",\"6\",\"8\",\"4\"]},\"color_spec\":{\"type\":\"ordinal\",\"values\":[\"4\",\"6\",\"8\"]},\"color\":[\"6\",\"6\",\"4\",\"6\",\"8\",\"6\",\"8\",\"4\",\"4\",\"6\",\"6\",\"8\",\"8\",\"8\",\"8\",\"8\",\"8\",\"4\",\"4\",\"4\",\"4\",\"8\",\"8\",\"8\",\"8\",\"4\",\"4\",\"4\",\"8\",\"6\",\"8\",\"4\"],\"x_label\":\"wt\",\"y_label\":\"hp\",\"x_lim\":null,\"y_lim\":null,\"group\":\"SharedDatac1fb52a8\"},\"evals\":[],\"jsHooks\":[]}</script>\n```\n:::\n:::\n\n::::\n\n:::\n\n`d3scatter` also allows click-and-drag selection of points, which will also be \n  applied to any other `d3scatter` plots using the same SharedData.\n\n\n### Plotly\n\nPlotly graphs are already responsive and allow zooming and selection, but using \n  crosstalk `filter_` functions we can do even more selection than what would be\n  available otherwise, with the effects carrying over into other plots. \n\n\n::: {.cell}\n\n```{.r .cell-code}\nsharedMtCars <- SharedData$new(mtcars)\n\ncarsCheckBox <- filter_checkbox(\"cyl\", \"Cylinders\", sharedMtCars, ~cyl, inline=T)\ncarsSelect <- filter_select(\"am\", \"Automatic\", sharedMtCars, ~am)\ncarsSlider <- filter_slider(\"disp\", \"Displacement\", sharedMtCars, ~disp)\n\nplotlyMpg <- plot_ly(sharedMtCars, x=~wt, y=~mpg, color = ~factor(cyl))\nplotlyHp <- plot_ly(sharedMtCars, x=~wt, y=~hp, color = ~factor(cyl))\n```\n:::\n\n\n::: {.columns}\n\n:::: {.column width=\"20%\"}\n\n::: {.cell}\n::: {.cell-output-display}\n```{=html}\n<div id=\"cyl\" class=\"form-group crosstalk-input-checkboxgroup crosstalk-input\">\n<label class=\"control-label\" for=\"cyl\">Cylinders</label>\n<div class=\"crosstalk-options-group\">\n<label class=\"checkbox-inline\">\n<input type=\"checkbox\" name=\"cyl\" value=\"4\"/>\n<span>4</span>\n</label>\n<label class=\"checkbox-inline\">\n<input type=\"checkbox\" name=\"cyl\" value=\"6\"/>\n<span>6</span>\n</label>\n<label class=\"checkbox-inline\">\n<input type=\"checkbox\" name=\"cyl\" value=\"8\"/>\n<span>8</span>\n</label>\n</div>\n<script type=\"application/json\" data-for=\"cyl\">{\n  \"map\": {\n    \"4\": [\"Datsun 710\", \"Merc 240D\", \"Merc 230\", \"Fiat 128\", \"Honda Civic\", \"Toyota Corolla\", \"Toyota Corona\", \"Fiat X1-9\", \"Porsche 914-2\", \"Lotus Europa\", \"Volvo 142E\"],\n    \"6\": [\"Mazda RX4\", \"Mazda RX4 Wag\", \"Hornet 4 Drive\", \"Valiant\", \"Merc 280\", \"Merc 280C\", \"Ferrari Dino\"],\n    \"8\": [\"Hornet Sportabout\", \"Duster 360\", \"Merc 450SE\", \"Merc 450SL\", \"Merc 450SLC\", \"Cadillac Fleetwood\", \"Lincoln Continental\", \"Chrysler Imperial\", \"Dodge Challenger\", \"AMC Javelin\", \"Camaro Z28\", \"Pontiac Firebird\", \"Ford Pantera L\", \"Maserati Bora\"]\n  },\n  \"group\": [\"SharedDataf16b7234\"]\n}</script>\n</div>\n```\n:::\n\n::: {.cell-output-display}\n```{=html}\n<div id=\"am\" class=\"form-group crosstalk-input-select crosstalk-input\">\n<label class=\"control-label\" for=\"am\">Automatic</label>\n<div>\n<select multiple></select>\n<script type=\"application/json\" data-for=\"am\">{\n  \"items\": {\n    \"value\": [\"0\", \"1\"],\n    \"label\": [\"0\", \"1\"]\n  },\n  \"map\": {\n    \"0\": [\"Hornet 4 Drive\", \"Hornet Sportabout\", \"Valiant\", \"Duster 360\", \"Merc 240D\", \"Merc 230\", \"Merc 280\", \"Merc 280C\", \"Merc 450SE\", \"Merc 450SL\", \"Merc 450SLC\", \"Cadillac Fleetwood\", \"Lincoln Continental\", \"Chrysler Imperial\", \"Toyota Corona\", \"Dodge Challenger\", \"AMC Javelin\", \"Camaro Z28\", \"Pontiac Firebird\"],\n    \"1\": [\"Mazda RX4\", \"Mazda RX4 Wag\", \"Datsun 710\", \"Fiat 128\", \"Honda Civic\", \"Toyota Corolla\", \"Fiat X1-9\", \"Porsche 914-2\", \"Lotus Europa\", \"Ford Pantera L\", \"Ferrari Dino\", \"Maserati Bora\", \"Volvo 142E\"]\n  },\n  \"group\": [\"SharedDataf16b7234\"]\n}</script>\n</div>\n</div>\n```\n:::\n\n::: {.cell-output-display}\n```{=html}\n<div class=\"form-group crosstalk-input crosstalk-input-slider js-range-slider\" id=\"disp\">\n<label class=\"control-label\" for=\"disp\">Displacement</label>\n<input data-skin=\"shiny\" data-type=\"double\" data-min=\"71.1\" data-max=\"472\" data-from=\"71.1\" data-to=\"472\" data-step=\"5\" data-grid=\"true\" data-grid-num=\"8.90888888888889\" data-grid-snap=\"false\" data-prettify-separator=\",\" data-keyboard=\"true\" data-keyboard-step=\"1.24719381391868\" data-drag-interval=\"true\" data-data-type=\"number\"/>\n<script type=\"application/json\" data-for=\"disp\">{\n  \"values\": [71.1, 75.7, 78.7, 79, 95.1, 108, 120.1, 120.3, 121, 140.8, 145, 146.7, 160, 160, 167.6, 167.6, 225, 258, 275.8, 275.8, 275.8, 301, 304, 318, 350, 351, 360, 360, 400, 440, 460, 472],\n  \"keys\": [\"Toyota Corolla\", \"Honda Civic\", \"Fiat 128\", \"Fiat X1-9\", \"Lotus Europa\", \"Datsun 710\", \"Toyota Corona\", \"Porsche 914-2\", \"Volvo 142E\", \"Merc 230\", \"Ferrari Dino\", \"Merc 240D\", \"Mazda RX4\", \"Mazda RX4 Wag\", \"Merc 280\", \"Merc 280C\", \"Valiant\", \"Hornet 4 Drive\", \"Merc 450SE\", \"Merc 450SL\", \"Merc 450SLC\", \"Maserati Bora\", \"AMC Javelin\", \"Dodge Challenger\", \"Camaro Z28\", \"Ford Pantera L\", \"Hornet Sportabout\", \"Duster 360\", \"Pontiac Firebird\", \"Chrysler Imperial\", \"Lincoln Continental\", \"Cadillac Fleetwood\"],\n  \"group\": [\"SharedDataf16b7234\"]\n}</script>\n</div>\n```\n:::\n:::\n\n::::\n\n:::: {.column width=\"40%\"}\n\n::: {.cell}\n::: {.cell-output-display}\n```{=html}\n<div class=\"plotly html-widget html-fill-item-overflow-hidden html-fill-item\" id=\"htmlwidget-51af391522019c3764b9\" style=\"width:100%;height:464px;\"></div>\n<script type=\"application/json\" data-for=\"htmlwidget-51af391522019c3764b9\">{\"x\":{\"visdat\":{\"ddc12e34bdc\":[\"function () \",\"plotlyVisDat\"]},\"cur_data\":\"ddc12e34bdc\",\"attrs\":{\"ddc12e34bdc\":{\"x\":{},\"y\":{},\"color\":{},\"alpha_stroke\":1,\"sizes\":[10,100],\"spans\":[1,20]}},\"layout\":{\"margin\":{\"b\":40,\"l\":60,\"t\":25,\"r\":10},\"xaxis\":{\"domain\":[0,1],\"automargin\":true,\"title\":\"wt\"},\"yaxis\":{\"domain\":[0,1],\"automargin\":true,\"title\":\"mpg\"},\"dragmode\":\"zoom\",\"hovermode\":\"closest\",\"showlegend\":true},\"source\":\"A\",\"config\":{\"modeBarButtonsToAdd\":[\"hoverclosest\",\"hovercompare\"],\"showSendToCloud\":false},\"data\":[{\"x\":[2.32,3.19,3.15,2.2,1.615,1.835,2.465,1.935,2.14,1.513,2.78],\"y\":[22.8,24.4,22.8,32.4,30.4,33.9,21.5,27.3,26,30.4,21.4],\"type\":\"scatter\",\"mode\":\"markers\",\"key\":[\"Datsun 710\",\"Merc 240D\",\"Merc 230\",\"Fiat 128\",\"Honda Civic\",\"Toyota Corolla\",\"Toyota Corona\",\"Fiat X1-9\",\"Porsche 914-2\",\"Lotus Europa\",\"Volvo 142E\"],\"set\":\"SharedDataf16b7234\",\"name\":\"4\",\"marker\":{\"color\":\"rgba(102,194,165,1)\",\"line\":{\"color\":\"rgba(102,194,165,1)\"}},\"textfont\":{\"color\":\"rgba(102,194,165,1)\"},\"error_y\":{\"color\":\"rgba(102,194,165,1)\"},\"error_x\":{\"color\":\"rgba(102,194,165,1)\"},\"line\":{\"color\":\"rgba(102,194,165,1)\"},\"xaxis\":\"x\",\"yaxis\":\"y\",\"_isNestedKey\":false,\"frame\":null},{\"x\":[2.62,2.875,3.215,3.46,3.44,3.44,2.77],\"y\":[21,21,21.4,18.1,19.2,17.8,19.7],\"type\":\"scatter\",\"mode\":\"markers\",\"key\":[\"Mazda RX4\",\"Mazda RX4 Wag\",\"Hornet 4 Drive\",\"Valiant\",\"Merc 280\",\"Merc 280C\",\"Ferrari Dino\"],\"set\":\"SharedDataf16b7234\",\"name\":\"6\",\"marker\":{\"color\":\"rgba(252,141,98,1)\",\"line\":{\"color\":\"rgba(252,141,98,1)\"}},\"textfont\":{\"color\":\"rgba(252,141,98,1)\"},\"error_y\":{\"color\":\"rgba(252,141,98,1)\"},\"error_x\":{\"color\":\"rgba(252,141,98,1)\"},\"line\":{\"color\":\"rgba(252,141,98,1)\"},\"xaxis\":\"x\",\"yaxis\":\"y\",\"_isNestedKey\":false,\"frame\":null},{\"x\":[3.44,3.57,4.07,3.73,3.78,5.25,5.424,5.345,3.52,3.435,3.84,3.845,3.17,3.57],\"y\":[18.7,14.3,16.4,17.3,15.2,10.4,10.4,14.7,15.5,15.2,13.3,19.2,15.8,15],\"type\":\"scatter\",\"mode\":\"markers\",\"key\":[\"Hornet Sportabout\",\"Duster 360\",\"Merc 450SE\",\"Merc 450SL\",\"Merc 450SLC\",\"Cadillac Fleetwood\",\"Lincoln Continental\",\"Chrysler Imperial\",\"Dodge Challenger\",\"AMC Javelin\",\"Camaro Z28\",\"Pontiac Firebird\",\"Ford Pantera L\",\"Maserati Bora\"],\"set\":\"SharedDataf16b7234\",\"name\":\"8\",\"marker\":{\"color\":\"rgba(141,160,203,1)\",\"line\":{\"color\":\"rgba(141,160,203,1)\"}},\"textfont\":{\"color\":\"rgba(141,160,203,1)\"},\"error_y\":{\"color\":\"rgba(141,160,203,1)\"},\"error_x\":{\"color\":\"rgba(141,160,203,1)\"},\"line\":{\"color\":\"rgba(141,160,203,1)\"},\"xaxis\":\"x\",\"yaxis\":\"y\",\"_isNestedKey\":false,\"frame\":null}],\"highlight\":{\"on\":\"plotly_click\",\"persistent\":false,\"dynamic\":false,\"selectize\":false,\"opacityDim\":0.2,\"selected\":{\"opacity\":1},\"debounce\":0,\"ctGroups\":[\"SharedDataf16b7234\"]},\"shinyEvents\":[\"plotly_hover\",\"plotly_click\",\"plotly_selected\",\"plotly_relayout\",\"plotly_brushed\",\"plotly_brushing\",\"plotly_clickannotation\",\"plotly_doubleclick\",\"plotly_deselect\",\"plotly_afterplot\",\"plotly_sunburstclick\"],\"base_url\":\"https://plot.ly\"},\"evals\":[],\"jsHooks\":[]}</script>\n```\n:::\n:::\n\n::::\n\n:::: {.column width=\"40%\"}\n\n::: {.cell}\n::: {.cell-output-display}\n```{=html}\n<div class=\"plotly html-widget html-fill-item-overflow-hidden html-fill-item\" id=\"htmlwidget-b64c2fc4711e16f2eea0\" style=\"width:100%;height:464px;\"></div>\n<script type=\"application/json\" data-for=\"htmlwidget-b64c2fc4711e16f2eea0\">{\"x\":{\"visdat\":{\"ddc16285038\":[\"function () \",\"plotlyVisDat\"]},\"cur_data\":\"ddc16285038\",\"attrs\":{\"ddc16285038\":{\"x\":{},\"y\":{},\"color\":{},\"alpha_stroke\":1,\"sizes\":[10,100],\"spans\":[1,20]}},\"layout\":{\"margin\":{\"b\":40,\"l\":60,\"t\":25,\"r\":10},\"xaxis\":{\"domain\":[0,1],\"automargin\":true,\"title\":\"wt\"},\"yaxis\":{\"domain\":[0,1],\"automargin\":true,\"title\":\"hp\"},\"dragmode\":\"zoom\",\"hovermode\":\"closest\",\"showlegend\":true},\"source\":\"A\",\"config\":{\"modeBarButtonsToAdd\":[\"hoverclosest\",\"hovercompare\"],\"showSendToCloud\":false},\"data\":[{\"x\":[2.32,3.19,3.15,2.2,1.615,1.835,2.465,1.935,2.14,1.513,2.78],\"y\":[93,62,95,66,52,65,97,66,91,113,109],\"type\":\"scatter\",\"mode\":\"markers\",\"key\":[\"Datsun 710\",\"Merc 240D\",\"Merc 230\",\"Fiat 128\",\"Honda Civic\",\"Toyota Corolla\",\"Toyota Corona\",\"Fiat X1-9\",\"Porsche 914-2\",\"Lotus Europa\",\"Volvo 142E\"],\"set\":\"SharedDataf16b7234\",\"name\":\"4\",\"marker\":{\"color\":\"rgba(102,194,165,1)\",\"line\":{\"color\":\"rgba(102,194,165,1)\"}},\"textfont\":{\"color\":\"rgba(102,194,165,1)\"},\"error_y\":{\"color\":\"rgba(102,194,165,1)\"},\"error_x\":{\"color\":\"rgba(102,194,165,1)\"},\"line\":{\"color\":\"rgba(102,194,165,1)\"},\"xaxis\":\"x\",\"yaxis\":\"y\",\"_isNestedKey\":false,\"frame\":null},{\"x\":[2.62,2.875,3.215,3.46,3.44,3.44,2.77],\"y\":[110,110,110,105,123,123,175],\"type\":\"scatter\",\"mode\":\"markers\",\"key\":[\"Mazda RX4\",\"Mazda RX4 Wag\",\"Hornet 4 Drive\",\"Valiant\",\"Merc 280\",\"Merc 280C\",\"Ferrari Dino\"],\"set\":\"SharedDataf16b7234\",\"name\":\"6\",\"marker\":{\"color\":\"rgba(252,141,98,1)\",\"line\":{\"color\":\"rgba(252,141,98,1)\"}},\"textfont\":{\"color\":\"rgba(252,141,98,1)\"},\"error_y\":{\"color\":\"rgba(252,141,98,1)\"},\"error_x\":{\"color\":\"rgba(252,141,98,1)\"},\"line\":{\"color\":\"rgba(252,141,98,1)\"},\"xaxis\":\"x\",\"yaxis\":\"y\",\"_isNestedKey\":false,\"frame\":null},{\"x\":[3.44,3.57,4.07,3.73,3.78,5.25,5.424,5.345,3.52,3.435,3.84,3.845,3.17,3.57],\"y\":[175,245,180,180,180,205,215,230,150,150,245,175,264,335],\"type\":\"scatter\",\"mode\":\"markers\",\"key\":[\"Hornet Sportabout\",\"Duster 360\",\"Merc 450SE\",\"Merc 450SL\",\"Merc 450SLC\",\"Cadillac Fleetwood\",\"Lincoln Continental\",\"Chrysler Imperial\",\"Dodge Challenger\",\"AMC Javelin\",\"Camaro Z28\",\"Pontiac Firebird\",\"Ford Pantera L\",\"Maserati Bora\"],\"set\":\"SharedDataf16b7234\",\"name\":\"8\",\"marker\":{\"color\":\"rgba(141,160,203,1)\",\"line\":{\"color\":\"rgba(141,160,203,1)\"}},\"textfont\":{\"color\":\"rgba(141,160,203,1)\"},\"error_y\":{\"color\":\"rgba(141,160,203,1)\"},\"error_x\":{\"color\":\"rgba(141,160,203,1)\"},\"line\":{\"color\":\"rgba(141,160,203,1)\"},\"xaxis\":\"x\",\"yaxis\":\"y\",\"_isNestedKey\":false,\"frame\":null}],\"highlight\":{\"on\":\"plotly_click\",\"persistent\":false,\"dynamic\":false,\"selectize\":false,\"opacityDim\":0.2,\"selected\":{\"opacity\":1},\"debounce\":0,\"ctGroups\":[\"SharedDataf16b7234\"]},\"shinyEvents\":[\"plotly_hover\",\"plotly_click\",\"plotly_selected\",\"plotly_relayout\",\"plotly_brushed\",\"plotly_brushing\",\"plotly_clickannotation\",\"plotly_doubleclick\",\"plotly_deselect\",\"plotly_afterplot\",\"plotly_sunburstclick\"],\"base_url\":\"https://plot.ly\"},\"evals\":[],\"jsHooks\":[]}</script>\n```\n:::\n:::\n\n::::\n\n:::\n\n\n### RGL\n\n\n::: {.cell}\n\n```{.r .cell-code}\nmtcars3D <- plot3d(x=mtcars$wt, y=mtcars$hp, mtcars$mpg, col=factor(mtcars$cyl))\nsharedData <- rglShared(mtcars3D[\"data\"])\nfilter_slider(\"wt\", \"Weight\", sharedData, ~x)\n```\n\n::: {.cell-output-display}\n```{=html}\n<div class=\"form-group crosstalk-input crosstalk-input-slider js-range-slider\" id=\"wt\">\n<label class=\"control-label\" for=\"wt\">Weight</label>\n<input data-skin=\"shiny\" data-type=\"double\" data-min=\"1.51300001144409\" data-max=\"5.42399978637695\" data-from=\"1.51300001144409\" data-to=\"5.42399978637695\" data-step=\"0.05\" data-grid=\"true\" data-grid-num=\"9.77749943733215\" data-grid-snap=\"false\" data-prettify-separator=\",\" data-keyboard=\"true\" data-keyboard-step=\"1.27844548395195\" data-drag-interval=\"true\" data-data-type=\"number\"/>\n<script type=\"application/json\" data-for=\"wt\">{\n  \"values\": [1.513, 1.615, 1.835, 1.935, 2.14, 2.2, 2.32, 2.465, 2.62, 2.77, 2.78, 2.875, 3.15, 3.17, 3.19, 3.215, 3.435, 3.44, 3.44, 3.44, 3.46, 3.52, 3.57, 3.57, 3.73, 3.78, 3.84, 3.845, 4.07, 5.25, 5.345, 5.424],\n  \"keys\": [\"28\", \"19\", \"20\", \"26\", \"27\", \"18\", \"3\", \"21\", \"1\", \"30\", \"32\", \"2\", \"9\", \"29\", \"8\", \"4\", \"23\", \"5\", \"10\", \"11\", \"6\", \"22\", \"7\", \"31\", \"13\", \"14\", \"24\", \"25\", \"12\", \"15\", \"17\", \"16\"],\n  \"group\": [\"SharedDataf19f2ee9\"]\n}</script>\n</div>\n```\n:::\n\n```{.r .cell-code}\nrglwidget(shared = sharedData)\n```\n\n::: {.cell-output-display}\n```{=html}\n<div id=\"rgl8668\" style=\"width:100%;height:464px;\" class=\"rglWebGL html-widget \"></div>\n<script type=\"application/json\" data-for=\"rgl8668\">{\"x\":{\"material\":{\"color\":\"#000000\",\"alpha\":1,\"lit\":true,\"ambient\":\"#000000\",\"specular\":\"#FFFFFF\",\"emission\":\"#000000\",\"shininess\":50,\"smooth\":true,\"front\":\"filled\",\"back\":\"filled\",\"size\":3,\"lwd\":1,\"fog\":true,\"point_antialias\":false,\"line_antialias\":false,\"texture\":null,\"textype\":\"rgb\",\"texmipmap\":false,\"texminfilter\":\"linear\",\"texmagfilter\":\"linear\",\"texenvmap\":false,\"depth_mask\":true,\"depth_test\":\"less\",\"isTransparent\":false,\"polygon_offset\":[0,0],\"margin\":\"\",\"floating\":false,\"tag\":\"\",\"blend\":[\"src_alpha\",\"one_minus_src_alpha\"]},\"rootSubscene\":7,\"objects\":{\"13\":{\"id\":13,\"type\":\"points\",\"material\":{\"lit\":false},\"vertices\":\"0\",\"colors\":\"1\",\"centers\":\"2\",\"ignoreExtent\":false,\"flags\":34816},\"15\":{\"id\":15,\"type\":\"text\",\"material\":{\"lit\":false,\"margin\":0,\"floating\":true,\"edge\":[0,1,1]},\"vertices\":\"3\",\"colors\":\"4\",\"texts\":[[\"mtcars$wt\"]],\"cex\":[[1]],\"adj\":[[0.5,0.5,0.5]],\"centers\":\"5\",\"family\":[[\"sans\"]],\"font\":[[1]],\"ignoreExtent\":true,\"flags\":33808},\"16\":{\"id\":16,\"type\":\"text\",\"material\":{\"lit\":false,\"margin\":1,\"floating\":true,\"edge\":[1,1,1]},\"vertices\":\"6\",\"colors\":\"7\",\"texts\":[[\"mtcars$hp\"]],\"cex\":[[1]],\"adj\":[[0.5,0.5,0.5]],\"centers\":\"8\",\"family\":[[\"sans\"]],\"font\":[[1]],\"ignoreExtent\":true,\"flags\":33808},\"17\":{\"id\":17,\"type\":\"text\",\"material\":{\"lit\":false,\"margin\":2,\"floating\":true,\"edge\":[1,1,1]},\"vertices\":\"9\",\"colors\":\"10\",\"texts\":[[\"mtcars$mpg\"]],\"cex\":[[1]],\"adj\":[[0.5,0.5,0.5]],\"centers\":\"11\",\"family\":[[\"sans\"]],\"font\":[[1]],\"ignoreExtent\":true,\"flags\":33808},\"11\":{\"id\":11,\"type\":\"light\",\"vertices\":[[0,0,1]],\"colors\":[[1,1,1,1],[1,1,1,1],[1,1,1,1]],\"viewpoint\":true,\"finite\":false},\"10\":{\"id\":10,\"type\":\"background\",\"material\":{},\"colors\":\"12\",\"centers\":\"13\",\"sphere\":false,\"fogtype\":\"none\",\"fogscale\":1,\"flags\":32768},\"12\":{\"id\":12,\"type\":\"background\",\"material\":{\"lit\":false,\"back\":\"lines\"},\"colors\":\"14\",\"centers\":\"15\",\"sphere\":false,\"fogtype\":\"none\",\"fogscale\":1,\"flags\":32768},\"14\":{\"id\":14,\"type\":\"bboxdeco\",\"material\":{\"front\":\"lines\",\"back\":\"lines\"},\"vertices\":\"16\",\"colors\":\"17\",\"axes\":{\"mode\":[\"pretty\",\"pretty\",\"pretty\"],\"step\":[1,50,5],\"nticks\":[5,5,5],\"marklen\":[15,15,15],\"expand\":[1.02999997138977,1.02999997138977,1.02999997138977]},\"draw_front\":true,\"flags\":32769},\"7\":{\"id\":7,\"type\":\"subscene\",\"par3d\":{\"antialias\":8,\"FOV\":30,\"ignoreExtent\":false,\"listeners\":7,\"mouseMode\":{\"none\":\"none\",\"left\":\"trackball\",\"right\":\"zoom\",\"middle\":\"fov\",\"wheel\":\"pull\"},\"observer\":[0,0,694.953857421875],\"modelMatrix\":[[41.9248390197754,0,0,-145.416305541992],[0,0.198163852095604,6.55657625198364,-183.572875976562],[0,-0.544450700283051,2.38639855384827,-642.461364746094],[0,0,0,1]],\"projMatrix\":[[3.73205065727234,0,0,0],[0,3.73205065727234,0,0],[0,0,-3.86370301246643,-2505.22802734375],[0,0,-1,0]],\"skipRedraw\":false,\"userMatrix\":[[1,0,0,0],[0,0.342020143325668,0.939692620785909,0],[0,-0.939692620785909,0.342020143325668,0],[0,0,0,1]],\"userProjection\":[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]],\"scale\":[41.9248390197754,0.579392313957214,6.97736263275146],\"viewport\":{\"x\":0,\"y\":0,\"width\":1,\"height\":1},\"zoom\":1,\"bbox\":[1.51300001144409,5.42399978637695,52,335,10.3999996185303,33.9000015258789],\"windowRect\":[242,265,498,521],\"family\":\"sans\",\"font\":1,\"cex\":1,\"useFreeType\":false,\"fontname\":\"TT Arial\",\"maxClipPlanes\":8,\"glVersion\":4.6,\"activeSubscene\":0},\"embeddings\":{\"viewport\":\"replace\",\"projection\":\"replace\",\"model\":\"replace\",\"mouse\":\"replace\"},\"objects\":[12,14,13,15,16,17,11],\"subscenes\":[],\"flags\":36113},\"30\":{\"id\":30,\"type\":\"linestrip\",\"material\":{\"alpha\":0.498039215803146,\"lit\":false,\"depth_test\":\"always\",\"isTransparent\":true},\"vertices\":\"18\",\"colors\":\"19\",\"centers\":\"20\",\"ignoreExtent\":false,\"flags\":49248}},\"crosstalk\":{\"key\":[[\"1\",\"2\",\"3\",\"4\",\"5\",\"6\",\"7\",\"8\",\"9\",\"10\",\"11\",\"12\",\"13\",\"14\",\"15\",\"16\",\"17\",\"18\",\"19\",\"20\",\"21\",\"22\",\"23\",\"24\",\"25\",\"26\",\"27\",\"28\",\"29\",\"30\",\"31\",\"32\"]],\"group\":\"SharedDataf19f2ee9\",\"id\":13,\"options\":[{\"deselectedFade\":0.1,\"deselectedColor\":null,\"selectedColor\":null,\"selectedIgnoreNone\":true,\"filteredFade\":0,\"filteredColor\":null}]},\"width\":672,\"height\":480,\"brushId\":30,\"buffer\":{\"accessors\":[{\"bufferView\":0,\"componentType\":5126,\"count\":32,\"type\":\"VEC3\"},{\"bufferView\":1,\"componentType\":5121,\"count\":32,\"type\":\"VEC4\",\"normalized\":true},{\"bufferView\":2,\"componentType\":5126,\"count\":32,\"type\":\"VEC3\"},{\"bufferView\":3,\"componentType\":5126,\"count\":1,\"type\":\"VEC3\"},{\"bufferView\":4,\"componentType\":5121,\"count\":1,\"type\":\"VEC4\"},{\"bufferView\":5,\"componentType\":5126,\"count\":1,\"type\":\"VEC3\"},{\"bufferView\":6,\"componentType\":5126,\"count\":1,\"type\":\"VEC3\"},{\"bufferView\":7,\"componentType\":5121,\"count\":1,\"type\":\"VEC4\"},{\"bufferView\":8,\"componentType\":5126,\"count\":1,\"type\":\"VEC3\"},{\"bufferView\":9,\"componentType\":5126,\"count\":1,\"type\":\"VEC3\"},{\"bufferView\":10,\"componentType\":5121,\"count\":1,\"type\":\"VEC4\"},{\"bufferView\":11,\"componentType\":5126,\"count\":1,\"type\":\"VEC3\"},{\"bufferView\":12,\"componentType\":5126,\"count\":1,\"type\":\"VEC4\"},{\"bufferView\":13,\"componentType\":5121,\"count\":1,\"type\":\"VEC3\"},{\"bufferView\":14,\"componentType\":5121,\"count\":1,\"type\":\"VEC4\"},{\"bufferView\":15,\"componentType\":5121,\"count\":1,\"type\":\"VEC3\"},{\"bufferView\":16,\"componentType\":5126,\"count\":13,\"type\":\"VEC3\"},{\"bufferView\":17,\"componentType\":5121,\"count\":1,\"type\":\"VEC4\"},{\"bufferView\":18,\"componentType\":5126,\"count\":5,\"type\":\"VEC3\"},{\"bufferView\":19,\"componentType\":5126,\"count\":1,\"type\":\"VEC4\"},{\"bufferView\":20,\"componentType\":5126,\"count\":5,\"type\":\"VEC3\"}],\"bufferViews\":[{\"buffer\":0,\"byteLength\":384,\"byteOffset\":0},{\"buffer\":0,\"byteLength\":128,\"byteOffset\":384},{\"buffer\":0,\"byteLength\":384,\"byteOffset\":512},{\"buffer\":0,\"byteLength\":12,\"byteOffset\":896},{\"buffer\":0,\"byteLength\":4,\"byteOffset\":908},{\"buffer\":0,\"byteLength\":12,\"byteOffset\":912},{\"buffer\":0,\"byteLength\":12,\"byteOffset\":924},{\"buffer\":0,\"byteLength\":4,\"byteOffset\":936},{\"buffer\":0,\"byteLength\":12,\"byteOffset\":940},{\"buffer\":0,\"byteLength\":12,\"byteOffset\":952},{\"buffer\":0,\"byteLength\":4,\"byteOffset\":964},{\"buffer\":0,\"byteLength\":12,\"byteOffset\":968},{\"buffer\":0,\"byteLength\":16,\"byteOffset\":980},{\"buffer\":0,\"byteLength\":3,\"byteOffset\":996},{\"buffer\":0,\"byteLength\":4,\"byteOffset\":999},{\"buffer\":0,\"byteLength\":3,\"byteOffset\":1003},{\"buffer\":0,\"byteLength\":156,\"byteOffset\":1008},{\"buffer\":0,\"byteLength\":4,\"byteOffset\":1164},{\"buffer\":0,\"byteLength\":60,\"byteOffset\":1168},{\"buffer\":0,\"byteLength\":16,\"byteOffset\":1228},{\"buffer\":0,\"byteLength\":60,\"byteOffset\":1244}],\"buffers\":[{\"byteLength\":1304,\"bytes\":\"FK4nQAAA3EIAAKhBAAA4QAAA3EIAAKhB4XoUQAAAukJmZrZBj8JNQAAA3EIzM6tB9ihcQAAA\\nL0OamZVBpHBdQAAA0kLNzJBB4XpkQAAAdUPNzGRB9ihMQAAAeEIzM8NBmplJQAAAvkJmZrZB\\n9ihcQAAA9kKamZlB9ihcQAAA9kJmZo5BcT2CQAAANEMzM4NBUrhuQAAANENmZopBhetxQAAA\\nNEMzM3NBAACoQAAATUNmZiZBaJGtQAAAV0NmZiZBPQqrQAAAZkMzM2tBzcwMQAAAhEKamQFC\\nUrjOPwAAUEIzM/NBSOHqPwAAgkKamQdCj8IdQAAAwkIAAKxBrkdhQAAAFkMAAHhBCtdbQAAA\\nFkMzM3NBj8J1QAAAdUPNzFRBexR2QAAAL0OamZlBFK73PwAAhEJmZtpBw/UIQAAAtkIAANBB\\n/KnBPwAA4kIzM/NBSOFKQAAAhEPNzHxBrkcxQAAAL0OamZ1B4XpkQACAp0MAAHBBhesxQAAA\\n2kIzM6tBzQu8/80LvP8il+b/zQu8/56env/NC7z/np6e/yKX5v8il+b/zQu8/80LvP+enp7/\\nnp6e/56env+enp7/np6e/56env8il+b/Ipfm/yKX5v8il+b/np6e/56env+enp7/np6e/yKX\\n5v8il+b/Ipfm/56env/NC7z/np6e/yKX5v8UridAAADcQgAAqEEAADhAAADcQgAAqEHhehRA\\nAAC6QmZmtkGPwk1AAADcQjMzq0H2KFxAAAAvQ5qZlUGkcF1AAADSQs3MkEHhemRAAAB1Q83M\\nZEH2KExAAAB4QjMzw0GamUlAAAC+QmZmtkH2KFxAAAD2QpqZmUH2KFxAAAD2QmZmjkFxPYJA\\nAAA0QzMzg0FSuG5AAAA0Q2ZmikGF63FAAAA0QzMzc0EAAKhAAABNQ2ZmJkFoka1AAABXQ2Zm\\nJkE9CqtAAABmQzMza0HNzAxAAACEQpqZAUJSuM4/AABQQjMz80FI4eo/AACCQpqZB0KPwh1A\\nAADCQgAArEGuR2FAAAAWQwAAeEEK11tAAAAWQzMzc0GPwnVAAAB1Q83MVEF7FHZAAAAvQ5qZ\\nmUEUrvc/AACEQmZm2kHD9QhAAAC2QgAA0EH8qcE/AADiQjMz80FI4UpAAACEQ83MfEGuRzFA\\nAAAvQ5qZnUHhemRAAICnQwAAcEGF6zFAAADaQjMzq0EAAMB/AACAQAAAgD8AAAABAADAfwAA\\ngEAAAIA/AADAfwAAgEAAAIA/AAAAAQAAwH8AAIBAAACAPwAAwH8AAIBAAACAPwAAAAEAAMB/\\nAACAQAAAgD+ZmJg+mZiYPpmYmD4AAIA/AAAAAQEBAQAAAAAAAAAAQAAAwH8AAMB/AABAQAAA\\nwH8AAMB/AACAQAAAwH8AAMB/AACgQAAAwH8AAMB/AADAfwAAyEIAAMB/AADAfwAAFkMAAMB/\\nAADAfwAASEMAAMB/AADAfwAAekMAAMB/AADAfwAAlkMAAMB/AADAfwAAwH8AAHBBAADAfwAA\\nwH8AAKBBAADAfwAAwH8AAMhBAADAfwAAwH8AAPBBAAAAAQAAAAAAAAAAd75/vwAAgD8AAAAA\\nd75/vwAAgD8AAIA/d75/vwAAAAAAAIA/d75/vwAAAAAAAAAAd75/vwAAAAAAAAAAAAAAAP/+\\n/j4AAAAAAAAAAHe+f78AAIA/AAAAAHe+f78AAIA/AACAP3e+f78AAAAAAACAP3e+f78AAAAA\\nAAAAAHe+f78=\"}]},\"context\":{\"shiny\":false,\"rmarkdown\":null},\"vertexShader\":\"#line 2 1\\n// File 1 is the vertex shader\\n#ifdef GL_ES\\n#ifdef GL_FRAGMENT_PRECISION_HIGH\\nprecision highp float;\\n#else\\nprecision mediump float;\\n#endif\\n#endif\\n\\nattribute vec3 aPos;\\nattribute vec4 aCol;\\nuniform mat4 mvMatrix;\\nuniform mat4 prMatrix;\\nvarying vec4 vCol;\\nvarying vec4 vPosition;\\n\\n#ifdef NEEDS_VNORMAL\\nattribute vec3 aNorm;\\nuniform mat4 normMatrix;\\nvarying vec4 vNormal;\\n#endif\\n\\n#if defined(HAS_TEXTURE) || defined (IS_TEXT)\\nattribute vec2 aTexcoord;\\nvarying vec2 vTexcoord;\\n#endif\\n\\n#ifdef FIXED_SIZE\\nuniform vec3 textScale;\\n#endif\\n\\n#ifdef FIXED_QUADS\\nattribute vec3 aOfs;\\n#endif\\n\\n#ifdef IS_TWOSIDED\\n#ifdef HAS_NORMALS\\nvarying float normz;\\nuniform mat4 invPrMatrix;\\n#else\\nattribute vec3 aPos1;\\nattribute vec3 aPos2;\\nvarying float normz;\\n#endif\\n#endif // IS_TWOSIDED\\n\\n#ifdef FAT_LINES\\nattribute vec3 aNext;\\nattribute vec2 aPoint;\\nvarying vec2 vPoint;\\nvarying float vLength;\\nuniform float uAspect;\\nuniform float uLwd;\\n#endif\\n\\n\\nvoid main(void) {\\n  \\n#ifndef IS_BRUSH\\n#if defined(NCLIPPLANES) || !defined(FIXED_QUADS) || defined(HAS_FOG)\\n  vPosition = mvMatrix * vec4(aPos, 1.);\\n#endif\\n  \\n#ifndef FIXED_QUADS\\n  gl_Position = prMatrix * vPosition;\\n#endif\\n#endif // !IS_BRUSH\\n  \\n#ifdef IS_POINTS\\n  gl_PointSize = POINTSIZE;\\n#endif\\n  \\n  vCol = aCol;\\n  \\n#ifdef NEEDS_VNORMAL\\n  vNormal = normMatrix * vec4(-aNorm, dot(aNorm, aPos));\\n#endif\\n  \\n#ifdef IS_TWOSIDED\\n#ifdef HAS_NORMALS\\n  /* normz should be calculated *after* projection */\\n  normz = (invPrMatrix*vNormal).z;\\n#else\\n  vec4 pos1 = prMatrix*(mvMatrix*vec4(aPos1, 1.));\\n  pos1 = pos1/pos1.w - gl_Position/gl_Position.w;\\n  vec4 pos2 = prMatrix*(mvMatrix*vec4(aPos2, 1.));\\n  pos2 = pos2/pos2.w - gl_Position/gl_Position.w;\\n  normz = pos1.x*pos2.y - pos1.y*pos2.x;\\n#endif\\n#endif // IS_TWOSIDED\\n  \\n#ifdef NEEDS_VNORMAL\\n  vNormal = vec4(normalize(vNormal.xyz/vNormal.w), 1);\\n#endif\\n  \\n#if defined(HAS_TEXTURE) || defined(IS_TEXT)\\n  vTexcoord = aTexcoord;\\n#endif\\n  \\n#if defined(FIXED_SIZE) && !defined(ROTATING)\\n  vec4 pos = prMatrix * mvMatrix * vec4(aPos, 1.);\\n  pos = pos/pos.w;\\n  gl_Position = pos + vec4(aOfs*textScale, 0.);\\n#endif\\n  \\n#if defined(IS_SPRITES) && !defined(FIXED_SIZE)\\n  vec4 pos = mvMatrix * vec4(aPos, 1.);\\n  pos = pos/pos.w + vec4(aOfs,  0.);\\n  gl_Position = prMatrix*pos;\\n#endif\\n  \\n#ifdef FAT_LINES\\n  /* This code was inspired by Matt Deslauriers' code in \\n   https://mattdesl.svbtle.com/drawing-lines-is-hard */\\n  vec2 aspectVec = vec2(uAspect, 1.0);\\n  mat4 projViewModel = prMatrix * mvMatrix;\\n  vec4 currentProjected = projViewModel * vec4(aPos, 1.0);\\n  currentProjected = currentProjected/currentProjected.w;\\n  vec4 nextProjected = projViewModel * vec4(aNext, 1.0);\\n  vec2 currentScreen = currentProjected.xy * aspectVec;\\n  vec2 nextScreen = (nextProjected.xy / nextProjected.w) * aspectVec;\\n  float len = uLwd;\\n  vec2 dir = vec2(1.0, 0.0);\\n  vPoint = aPoint;\\n  vLength = length(nextScreen - currentScreen)/2.0;\\n  vLength = vLength/(vLength + len);\\n  if (vLength > 0.0) {\\n    dir = normalize(nextScreen - currentScreen);\\n  }\\n  vec2 normal = vec2(-dir.y, dir.x);\\n  dir.x /= uAspect;\\n  normal.x /= uAspect;\\n  vec4 offset = vec4(len*(normal*aPoint.x*aPoint.y - dir), 0.0, 0.0);\\n  gl_Position = currentProjected + offset;\\n#endif\\n  \\n#ifdef IS_BRUSH\\n  gl_Position = vec4(aPos, 1.);\\n#endif\\n}\",\"fragmentShader\":\"#line 2 2\\n// File 2 is the fragment shader\\n#ifdef GL_ES\\n#ifdef GL_FRAGMENT_PRECISION_HIGH\\nprecision highp float;\\n#else\\nprecision mediump float;\\n#endif\\n#endif\\nvarying vec4 vCol; // carries alpha\\nvarying vec4 vPosition;\\n#if defined(HAS_TEXTURE) || defined (IS_TEXT)\\nvarying vec2 vTexcoord;\\nuniform sampler2D uSampler;\\n#endif\\n\\n#ifdef HAS_FOG\\nuniform int uFogMode;\\nuniform vec3 uFogColor;\\nuniform vec4 uFogParms;\\n#endif\\n\\n#if defined(IS_LIT) && !defined(FIXED_QUADS)\\nvarying vec4 vNormal;\\n#endif\\n\\n#if NCLIPPLANES > 0\\nuniform vec4 vClipplane[NCLIPPLANES];\\n#endif\\n\\n#if NLIGHTS > 0\\nuniform mat4 mvMatrix;\\n#endif\\n\\n#ifdef IS_LIT\\nuniform vec3 emission;\\nuniform float shininess;\\n#if NLIGHTS > 0\\nuniform vec3 ambient[NLIGHTS];\\nuniform vec3 specular[NLIGHTS]; // light*material\\nuniform vec3 diffuse[NLIGHTS];\\nuniform vec3 lightDir[NLIGHTS];\\nuniform bool viewpoint[NLIGHTS];\\nuniform bool finite[NLIGHTS];\\n#endif\\n#endif // IS_LIT\\n\\n#ifdef IS_TWOSIDED\\nuniform bool front;\\nvarying float normz;\\n#endif\\n\\n#ifdef FAT_LINES\\nvarying vec2 vPoint;\\nvarying float vLength;\\n#endif\\n\\nvoid main(void) {\\n  vec4 fragColor;\\n#ifdef FAT_LINES\\n  vec2 point = vPoint;\\n  bool neg = point.y < 0.0;\\n  point.y = neg ? (point.y + vLength)/(1.0 - vLength) :\\n                 -(point.y - vLength)/(1.0 - vLength);\\n#if defined(IS_TRANSPARENT) && defined(IS_LINESTRIP)\\n  if (neg && length(point) <= 1.0) discard;\\n#endif\\n  point.y = min(point.y, 0.0);\\n  if (length(point) > 1.0) discard;\\n#endif // FAT_LINES\\n  \\n#ifdef ROUND_POINTS\\n  vec2 coord = gl_PointCoord - vec2(0.5);\\n  if (length(coord) > 0.5) discard;\\n#endif\\n  \\n#if NCLIPPLANES > 0\\n  for (int i = 0; i < NCLIPPLANES; i++)\\n    if (dot(vPosition, vClipplane[i]) < 0.0) discard;\\n#endif\\n    \\n#ifdef FIXED_QUADS\\n    vec3 n = vec3(0., 0., 1.);\\n#elif defined(IS_LIT)\\n    vec3 n = normalize(vNormal.xyz);\\n#endif\\n    \\n#ifdef IS_TWOSIDED\\n    if ((normz <= 0.) != front) discard;\\n#endif\\n    \\n#ifdef IS_LIT\\n    vec3 eye = normalize(-vPosition.xyz/vPosition.w);\\n    vec3 lightdir;\\n    vec4 colDiff;\\n    vec3 halfVec;\\n    vec4 lighteffect = vec4(emission, 0.);\\n    vec3 col;\\n    float nDotL;\\n#ifdef FIXED_QUADS\\n    n = -faceforward(n, n, eye);\\n#endif\\n    \\n#if NLIGHTS > 0\\n    for (int i=0;i<NLIGHTS;i++) {\\n      colDiff = vec4(vCol.rgb * diffuse[i], vCol.a);\\n      lightdir = lightDir[i];\\n      if (!viewpoint[i])\\n        lightdir = (mvMatrix * vec4(lightdir, 1.)).xyz;\\n      if (!finite[i]) {\\n        halfVec = normalize(lightdir + eye);\\n      } else {\\n        lightdir = normalize(lightdir - vPosition.xyz/vPosition.w);\\n        halfVec = normalize(lightdir + eye);\\n      }\\n      col = ambient[i];\\n      nDotL = dot(n, lightdir);\\n      col = col + max(nDotL, 0.) * colDiff.rgb;\\n      col = col + pow(max(dot(halfVec, n), 0.), shininess) * specular[i];\\n      lighteffect = lighteffect + vec4(col, colDiff.a);\\n    }\\n#endif\\n    \\n#else // not IS_LIT\\n    vec4 colDiff = vCol;\\n    vec4 lighteffect = colDiff;\\n#endif\\n    \\n#ifdef IS_TEXT\\n    vec4 textureColor = lighteffect*texture2D(uSampler, vTexcoord);\\n#endif\\n    \\n#ifdef HAS_TEXTURE\\n#ifdef TEXTURE_rgb\\n    vec4 textureColor = lighteffect*vec4(texture2D(uSampler, vTexcoord).rgb, 1.);\\n#endif\\n    \\n#ifdef TEXTURE_rgba\\n    vec4 textureColor = lighteffect*texture2D(uSampler, vTexcoord);\\n#endif\\n    \\n#ifdef TEXTURE_alpha\\n    vec4 textureColor = texture2D(uSampler, vTexcoord);\\n    float luminance = dot(vec3(1.,1.,1.), textureColor.rgb)/3.;\\n    textureColor =  vec4(lighteffect.rgb, lighteffect.a*luminance);\\n#endif\\n    \\n#ifdef TEXTURE_luminance\\n    vec4 textureColor = vec4(lighteffect.rgb*dot(texture2D(uSampler, vTexcoord).rgb, vec3(1.,1.,1.))/3., lighteffect.a);\\n#endif\\n    \\n#ifdef TEXTURE_luminance_alpha\\n    vec4 textureColor = texture2D(uSampler, vTexcoord);\\n    float luminance = dot(vec3(1.,1.,1.),textureColor.rgb)/3.;\\n    textureColor = vec4(lighteffect.rgb*luminance, lighteffect.a*textureColor.a);\\n#endif\\n    \\n    fragColor = textureColor;\\n\\n#elif defined(IS_TEXT)\\n    if (textureColor.a < 0.1)\\n      discard;\\n    else\\n      fragColor = textureColor;\\n#else\\n    fragColor = lighteffect;\\n#endif // HAS_TEXTURE\\n    \\n#ifdef HAS_FOG\\n    // uFogParms elements: x = near, y = far, z = fogscale, w = (1-sin(FOV/2))/(1+sin(FOV/2))\\n    // In Exp and Exp2: use density = density/far\\n    // fogF will be the proportion of fog\\n    // Initialize it to the linear value\\n    float fogF;\\n    if (uFogMode > 0) {\\n      fogF = (uFogParms.y - vPosition.z/vPosition.w)/(uFogParms.y - uFogParms.x);\\n      if (uFogMode > 1)\\n        fogF = mix(uFogParms.w, 1.0, fogF);\\n      fogF = fogF*uFogParms.z;\\n      if (uFogMode == 2)\\n        fogF = 1.0 - exp(-fogF);\\n      // Docs are wrong: use (density*c)^2, not density*c^2\\n      // https://gitlab.freedesktop.org/mesa/mesa/-/blob/master/src/mesa/swrast/s_fog.c#L58\\n      else if (uFogMode == 3)\\n        fogF = 1.0 - exp(-fogF*fogF);\\n      fogF = clamp(fogF, 0.0, 1.0);\\n      gl_FragColor = vec4(mix(fragColor.rgb, uFogColor, fogF), fragColor.a);\\n    } else gl_FragColor = fragColor;\\n#else\\n    gl_FragColor = fragColor;\\n#endif // HAS_FOG\\n    \\n}\",\"players\":[],\"webGLoptions\":{\"preserveDrawingBuffer\":true}},\"evals\":[],\"jsHooks\":[]}</script>\n```\n:::\n:::\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {
      "include-in-header": [
        "<script src=\"../../site_libs/jquery-3.5.1/jquery.min.js\"></script>\r\n<link href=\"../../site_libs/crosstalk-1.2.0/css/crosstalk.min.css\" rel=\"stylesheet\" />\r\n<script src=\"../../site_libs/crosstalk-1.2.0/js/crosstalk.min.js\"></script>\r\n<link href=\"../../site_libs/selectize-0.12.4/css/selectize.bootstrap3.css\" rel=\"stylesheet\" />\r\n<script src=\"../../site_libs/selectize-0.12.4/js/selectize.min.js\"></script>\r\n<script src=\"../../site_libs/ionrangeslider-javascript-2.3.1/js/ion.rangeSlider.min.js\"></script>\r\n<script src=\"../../site_libs/strftime-0.9.2/strftime-min.js\"></script>\r\n<link href=\"../../site_libs/ionrangeslider-css-2.3.1/css/ion.rangeSlider.css\" rel=\"stylesheet\" />\r\n<script src=\"../../site_libs/htmlwidgets-1.6.1/htmlwidgets.js\"></script>\r\n<script src=\"../../site_libs/d3-3.5.9/d3.min.js\"></script>\r\n<link href=\"../../site_libs/d3scatter-0.0.0/d3scatter.css\" rel=\"stylesheet\" />\r\n<script src=\"../../site_libs/d3scatter-0.0.0/d3scatter.js\"></script>\r\n<script src=\"../../site_libs/d3scatter-binding-0.1.0/d3scatter.js\"></script>\r\n<script src=\"../../site_libs/plotly-binding-4.10.1/plotly.js\"></script>\r\n<script src=\"../../site_libs/typedarray-0.1/typedarray.min.js\"></script>\r\n<link href=\"../../site_libs/plotly-htmlwidgets-css-2.11.1/plotly-htmlwidgets.css\" rel=\"stylesheet\" />\r\n<script src=\"../../site_libs/plotly-main-2.11.1/plotly-latest.min.js\"></script>\r\n<script src=\"../../site_libs/rglWebGL-binding-1.0.1/rglWebGL.js\"></script>\r\n<link href=\"../../site_libs/rglwidgetClass-1.0.1/rgl.css\" rel=\"stylesheet\" />\r\n<script src=\"../../site_libs/rglwidgetClass-1.0.1/rglClass.src.js\"></script>\r\n<script src=\"../../site_libs/rglwidgetClass-1.0.1/utils.src.js\"></script>\r\n<script src=\"../../site_libs/rglwidgetClass-1.0.1/buffer.src.js\"></script>\r\n<script src=\"../../site_libs/rglwidgetClass-1.0.1/subscenes.src.js\"></script>\r\n<script src=\"../../site_libs/rglwidgetClass-1.0.1/shaders.src.js\"></script>\r\n<script src=\"../../site_libs/rglwidgetClass-1.0.1/textures.src.js\"></script>\r\n<script src=\"../../site_libs/rglwidgetClass-1.0.1/projection.src.js\"></script>\r\n<script src=\"../../site_libs/rglwidgetClass-1.0.1/mouse.src.js\"></script>\r\n<script src=\"../../site_libs/rglwidgetClass-1.0.1/init.src.js\"></script>\r\n<script src=\"../../site_libs/rglwidgetClass-1.0.1/pieces.src.js\"></script>\r\n<script src=\"../../site_libs/rglwidgetClass-1.0.1/draw.src.js\"></script>\r\n<script src=\"../../site_libs/rglwidgetClass-1.0.1/controls.src.js\"></script>\r\n<script src=\"../../site_libs/rglwidgetClass-1.0.1/selection.src.js\"></script>\r\n<script src=\"../../site_libs/rglwidgetClass-1.0.1/rglTimer.src.js\"></script>\r\n<script src=\"../../site_libs/rglwidgetClass-1.0.1/pretty.src.js\"></script>\r\n<script src=\"../../site_libs/rglwidgetClass-1.0.1/axes.src.js\"></script>\r\n<script src=\"../../site_libs/rglwidgetClass-1.0.1/animation.src.js\"></script>\r\n<!--html_preserve--><script type = \"text/plain\" id = \"rgl-vertex-shader\">\r\n#line 2 1\r\n// File 1 is the vertex shader\r\n#ifdef GL_ES\r\n#ifdef GL_FRAGMENT_PRECISION_HIGH\r\nprecision highp float;\r\n#else\r\nprecision mediump float;\r\n#endif\r\n#endif\r\n\r\nattribute vec3 aPos;\r\nattribute vec4 aCol;\r\nuniform mat4 mvMatrix;\r\nuniform mat4 prMatrix;\r\nvarying vec4 vCol;\r\nvarying vec4 vPosition;\r\n\r\n#ifdef NEEDS_VNORMAL\r\nattribute vec3 aNorm;\r\nuniform mat4 normMatrix;\r\nvarying vec4 vNormal;\r\n#endif\r\n\r\n#if defined(HAS_TEXTURE) || defined (IS_TEXT)\r\nattribute vec2 aTexcoord;\r\nvarying vec2 vTexcoord;\r\n#endif\r\n\r\n#ifdef FIXED_SIZE\r\nuniform vec3 textScale;\r\n#endif\r\n\r\n#ifdef FIXED_QUADS\r\nattribute vec3 aOfs;\r\n#endif\r\n\r\n#ifdef IS_TWOSIDED\r\n#ifdef HAS_NORMALS\r\nvarying float normz;\r\nuniform mat4 invPrMatrix;\r\n#else\r\nattribute vec3 aPos1;\r\nattribute vec3 aPos2;\r\nvarying float normz;\r\n#endif\r\n#endif // IS_TWOSIDED\r\n\r\n#ifdef FAT_LINES\r\nattribute vec3 aNext;\r\nattribute vec2 aPoint;\r\nvarying vec2 vPoint;\r\nvarying float vLength;\r\nuniform float uAspect;\r\nuniform float uLwd;\r\n#endif\r\n\r\n\r\nvoid main(void) {\r\n  \r\n#ifndef IS_BRUSH\r\n#if defined(NCLIPPLANES) || !defined(FIXED_QUADS) || defined(HAS_FOG)\r\n  vPosition = mvMatrix * vec4(aPos, 1.);\r\n#endif\r\n  \r\n#ifndef FIXED_QUADS\r\n  gl_Position = prMatrix * vPosition;\r\n#endif\r\n#endif // !IS_BRUSH\r\n  \r\n#ifdef IS_POINTS\r\n  gl_PointSize = POINTSIZE;\r\n#endif\r\n  \r\n  vCol = aCol;\r\n  \r\n#ifdef NEEDS_VNORMAL\r\n  vNormal = normMatrix * vec4(-aNorm, dot(aNorm, aPos));\r\n#endif\r\n  \r\n#ifdef IS_TWOSIDED\r\n#ifdef HAS_NORMALS\r\n  /* normz should be calculated *after* projection */\r\n  normz = (invPrMatrix*vNormal).z;\r\n#else\r\n  vec4 pos1 = prMatrix*(mvMatrix*vec4(aPos1, 1.));\r\n  pos1 = pos1/pos1.w - gl_Position/gl_Position.w;\r\n  vec4 pos2 = prMatrix*(mvMatrix*vec4(aPos2, 1.));\r\n  pos2 = pos2/pos2.w - gl_Position/gl_Position.w;\r\n  normz = pos1.x*pos2.y - pos1.y*pos2.x;\r\n#endif\r\n#endif // IS_TWOSIDED\r\n  \r\n#ifdef NEEDS_VNORMAL\r\n  vNormal = vec4(normalize(vNormal.xyz/vNormal.w), 1);\r\n#endif\r\n  \r\n#if defined(HAS_TEXTURE) || defined(IS_TEXT)\r\n  vTexcoord = aTexcoord;\r\n#endif\r\n  \r\n#if defined(FIXED_SIZE) && !defined(ROTATING)\r\n  vec4 pos = prMatrix * mvMatrix * vec4(aPos, 1.);\r\n  pos = pos/pos.w;\r\n  gl_Position = pos + vec4(aOfs*textScale, 0.);\r\n#endif\r\n  \r\n#if defined(IS_SPRITES) && !defined(FIXED_SIZE)\r\n  vec4 pos = mvMatrix * vec4(aPos, 1.);\r\n  pos = pos/pos.w + vec4(aOfs,  0.);\r\n  gl_Position = prMatrix*pos;\r\n#endif\r\n  \r\n#ifdef FAT_LINES\r\n  /* This code was inspired by Matt Deslauriers' code in \r\n   https://mattdesl.svbtle.com/drawing-lines-is-hard */\r\n  vec2 aspectVec = vec2(uAspect, 1.0);\r\n  mat4 projViewModel = prMatrix * mvMatrix;\r\n  vec4 currentProjected = projViewModel * vec4(aPos, 1.0);\r\n  currentProjected = currentProjected/currentProjected.w;\r\n  vec4 nextProjected = projViewModel * vec4(aNext, 1.0);\r\n  vec2 currentScreen = currentProjected.xy * aspectVec;\r\n  vec2 nextScreen = (nextProjected.xy / nextProjected.w) * aspectVec;\r\n  float len = uLwd;\r\n  vec2 dir = vec2(1.0, 0.0);\r\n  vPoint = aPoint;\r\n  vLength = length(nextScreen - currentScreen)/2.0;\r\n  vLength = vLength/(vLength + len);\r\n  if (vLength > 0.0) {\r\n    dir = normalize(nextScreen - currentScreen);\r\n  }\r\n  vec2 normal = vec2(-dir.y, dir.x);\r\n  dir.x /= uAspect;\r\n  normal.x /= uAspect;\r\n  vec4 offset = vec4(len*(normal*aPoint.x*aPoint.y - dir), 0.0, 0.0);\r\n  gl_Position = currentProjected + offset;\r\n#endif\r\n  \r\n#ifdef IS_BRUSH\r\n  gl_Position = vec4(aPos, 1.);\r\n#endif\r\n}\r\n</script>\r\n<script type = \"text/plain\" id = \"rgl-fragment-shader\">\r\n#line 2 2\r\n// File 2 is the fragment shader\r\n#ifdef GL_ES\r\n#ifdef GL_FRAGMENT_PRECISION_HIGH\r\nprecision highp float;\r\n#else\r\nprecision mediump float;\r\n#endif\r\n#endif\r\nvarying vec4 vCol; // carries alpha\r\nvarying vec4 vPosition;\r\n#if defined(HAS_TEXTURE) || defined (IS_TEXT)\r\nvarying vec2 vTexcoord;\r\nuniform sampler2D uSampler;\r\n#endif\r\n\r\n#ifdef HAS_FOG\r\nuniform int uFogMode;\r\nuniform vec3 uFogColor;\r\nuniform vec4 uFogParms;\r\n#endif\r\n\r\n#if defined(IS_LIT) && !defined(FIXED_QUADS)\r\nvarying vec4 vNormal;\r\n#endif\r\n\r\n#if NCLIPPLANES > 0\r\nuniform vec4 vClipplane[NCLIPPLANES];\r\n#endif\r\n\r\n#if NLIGHTS > 0\r\nuniform mat4 mvMatrix;\r\n#endif\r\n\r\n#ifdef IS_LIT\r\nuniform vec3 emission;\r\nuniform float shininess;\r\n#if NLIGHTS > 0\r\nuniform vec3 ambient[NLIGHTS];\r\nuniform vec3 specular[NLIGHTS]; // light*material\r\nuniform vec3 diffuse[NLIGHTS];\r\nuniform vec3 lightDir[NLIGHTS];\r\nuniform bool viewpoint[NLIGHTS];\r\nuniform bool finite[NLIGHTS];\r\n#endif\r\n#endif // IS_LIT\r\n\r\n#ifdef IS_TWOSIDED\r\nuniform bool front;\r\nvarying float normz;\r\n#endif\r\n\r\n#ifdef FAT_LINES\r\nvarying vec2 vPoint;\r\nvarying float vLength;\r\n#endif\r\n\r\nvoid main(void) {\r\n  vec4 fragColor;\r\n#ifdef FAT_LINES\r\n  vec2 point = vPoint;\r\n  bool neg = point.y < 0.0;\r\n  point.y = neg ? (point.y + vLength)/(1.0 - vLength) :\r\n                 -(point.y - vLength)/(1.0 - vLength);\r\n#if defined(IS_TRANSPARENT) && defined(IS_LINESTRIP)\r\n  if (neg && length(point) <= 1.0) discard;\r\n#endif\r\n  point.y = min(point.y, 0.0);\r\n  if (length(point) > 1.0) discard;\r\n#endif // FAT_LINES\r\n  \r\n#ifdef ROUND_POINTS\r\n  vec2 coord = gl_PointCoord - vec2(0.5);\r\n  if (length(coord) > 0.5) discard;\r\n#endif\r\n  \r\n#if NCLIPPLANES > 0\r\n  for (int i = 0; i < NCLIPPLANES; i++)\r\n    if (dot(vPosition, vClipplane[i]) < 0.0) discard;\r\n#endif\r\n    \r\n#ifdef FIXED_QUADS\r\n    vec3 n = vec3(0., 0., 1.);\r\n#elif defined(IS_LIT)\r\n    vec3 n = normalize(vNormal.xyz);\r\n#endif\r\n    \r\n#ifdef IS_TWOSIDED\r\n    if ((normz <= 0.) != front) discard;\r\n#endif\r\n    \r\n#ifdef IS_LIT\r\n    vec3 eye = normalize(-vPosition.xyz/vPosition.w);\r\n    vec3 lightdir;\r\n    vec4 colDiff;\r\n    vec3 halfVec;\r\n    vec4 lighteffect = vec4(emission, 0.);\r\n    vec3 col;\r\n    float nDotL;\r\n#ifdef FIXED_QUADS\r\n    n = -faceforward(n, n, eye);\r\n#endif\r\n    \r\n#if NLIGHTS > 0\r\n    for (int i=0;i<NLIGHTS;i++) {\r\n      colDiff = vec4(vCol.rgb * diffuse[i], vCol.a);\r\n      lightdir = lightDir[i];\r\n      if (!viewpoint[i])\r\n        lightdir = (mvMatrix * vec4(lightdir, 1.)).xyz;\r\n      if (!finite[i]) {\r\n        halfVec = normalize(lightdir + eye);\r\n      } else {\r\n        lightdir = normalize(lightdir - vPosition.xyz/vPosition.w);\r\n        halfVec = normalize(lightdir + eye);\r\n      }\r\n      col = ambient[i];\r\n      nDotL = dot(n, lightdir);\r\n      col = col + max(nDotL, 0.) * colDiff.rgb;\r\n      col = col + pow(max(dot(halfVec, n), 0.), shininess) * specular[i];\r\n      lighteffect = lighteffect + vec4(col, colDiff.a);\r\n    }\r\n#endif\r\n    \r\n#else // not IS_LIT\r\n    vec4 colDiff = vCol;\r\n    vec4 lighteffect = colDiff;\r\n#endif\r\n    \r\n#ifdef IS_TEXT\r\n    vec4 textureColor = lighteffect*texture2D(uSampler, vTexcoord);\r\n#endif\r\n    \r\n#ifdef HAS_TEXTURE\r\n#ifdef TEXTURE_rgb\r\n    vec4 textureColor = lighteffect*vec4(texture2D(uSampler, vTexcoord).rgb, 1.);\r\n#endif\r\n    \r\n#ifdef TEXTURE_rgba\r\n    vec4 textureColor = lighteffect*texture2D(uSampler, vTexcoord);\r\n#endif\r\n    \r\n#ifdef TEXTURE_alpha\r\n    vec4 textureColor = texture2D(uSampler, vTexcoord);\r\n    float luminance = dot(vec3(1.,1.,1.), textureColor.rgb)/3.;\r\n    textureColor =  vec4(lighteffect.rgb, lighteffect.a*luminance);\r\n#endif\r\n    \r\n#ifdef TEXTURE_luminance\r\n    vec4 textureColor = vec4(lighteffect.rgb*dot(texture2D(uSampler, vTexcoord).rgb, vec3(1.,1.,1.))/3., lighteffect.a);\r\n#endif\r\n    \r\n#ifdef TEXTURE_luminance_alpha\r\n    vec4 textureColor = texture2D(uSampler, vTexcoord);\r\n    float luminance = dot(vec3(1.,1.,1.),textureColor.rgb)/3.;\r\n    textureColor = vec4(lighteffect.rgb*luminance, lighteffect.a*textureColor.a);\r\n#endif\r\n    \r\n    fragColor = textureColor;\r\n\r\n#elif defined(IS_TEXT)\r\n    if (textureColor.a < 0.1)\r\n      discard;\r\n    else\r\n      fragColor = textureColor;\r\n#else\r\n    fragColor = lighteffect;\r\n#endif // HAS_TEXTURE\r\n    \r\n#ifdef HAS_FOG\r\n    // uFogParms elements: x = near, y = far, z = fogscale, w = (1-sin(FOV/2))/(1+sin(FOV/2))\r\n    // In Exp and Exp2: use density = density/far\r\n    // fogF will be the proportion of fog\r\n    // Initialize it to the linear value\r\n    float fogF;\r\n    if (uFogMode > 0) {\r\n      fogF = (uFogParms.y - vPosition.z/vPosition.w)/(uFogParms.y - uFogParms.x);\r\n      if (uFogMode > 1)\r\n        fogF = mix(uFogParms.w, 1.0, fogF);\r\n      fogF = fogF*uFogParms.z;\r\n      if (uFogMode == 2)\r\n        fogF = 1.0 - exp(-fogF);\r\n      // Docs are wrong: use (density*c)^2, not density*c^2\r\n      // https://gitlab.freedesktop.org/mesa/mesa/-/blob/master/src/mesa/swrast/s_fog.c#L58\r\n      else if (uFogMode == 3)\r\n        fogF = 1.0 - exp(-fogF*fogF);\r\n      fogF = clamp(fogF, 0.0, 1.0);\r\n      gl_FragColor = vec4(mix(fragColor.rgb, uFogColor, fogF), fragColor.a);\r\n    } else gl_FragColor = fragColor;\r\n#else\r\n    gl_FragColor = fragColor;\r\n#endif // HAS_FOG\r\n    \r\n}\r\n</script><!--/html_preserve-->\r\n<script src=\"../../site_libs/CanvasMatrix4-1.0.1/CanvasMatrix.src.js\"></script>\r\n"
      ]
    },
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}